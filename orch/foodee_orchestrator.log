2024-10-28 12:43:01,944 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 12:43:01,944 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 12:43:07,432 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 12:43:07,506 - openai_meal_gen_single_meal - ERROR - Error in generate_meals_from_provider: name 'username' is not defined
2024-10-28 12:43:07,515 - Foodee.Orchestrator - ERROR - Error in meal generation: name 'username' is not defined
2024-10-28 12:43:07,516 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'username' is not defined
2024-10-28 12:43:07,516 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'username' is not defined
2024-10-28 12:47:12,983 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 12:47:12,984 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 12:47:17,571 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 12:47:17,623 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Pork Loin with Apple-Fennel Slaw', sides=['Roasted Sweet Potato Wedges', 'Sauteed Green Beans with Garlic'])
2024-10-28 12:47:17,649 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNBez6n9MuvzifaIIh30vhdlBmVI', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Pork Loin with Apple-Fennel Slaw","sides":["Roasted Sweet Potato Wedges","Sauteed Green Beans with Garlic"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Pork Loin with Apple-Fennel Slaw', sides=['Roasted Sweet Potato Wedges', 'Sauteed Green Beans with Garlic']))))], created=1730134038, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=38, prompt_tokens=878, total_tokens=916, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 12:47:17,660 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 12:47:48,082 - Foodee.Orchestrator - ERROR - Error retrieving session IDs: localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: <TopologyDescription id: 671fc01047ccae22a74345fa, topology_type: Unknown, servers: [<ServerDescription ('localhost', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2024-10-28 12:47:48,082 - Foodee.Orchestrator - ERROR - Error in orchestration process: localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: <TopologyDescription id: 671fc01047ccae22a74345fa, topology_type: Unknown, servers: [<ServerDescription ('localhost', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2024-10-28 12:47:48,083 - Foodee.Orchestrator - ERROR - Fatal error in main: localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: <TopologyDescription id: 671fc01047ccae22a74345fa, topology_type: Unknown, servers: [<ServerDescription ('localhost', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('localhost:27017: [WinError 10061] No connection could be made because the target machine actively refused it (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2024-10-28 12:50:23,158 - Foodee.Orchestrator - ERROR - Fatal error in main: MongoDB connection string not found in environment variables
2024-10-28 12:52:21,019 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 12:52:21,039 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 12:52:21,039 - Foodee.Orchestrator - ERROR - Error in orchestration process: 'FoodeeOrchestrator' object has no attribute 'run_meal_generation'
2024-10-28 12:52:21,039 - Foodee.Orchestrator - ERROR - Fatal error in main: 'FoodeeOrchestrator' object has no attribute 'run_meal_generation'
2024-10-28 12:54:31,544 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 12:54:31,574 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 12:54:31,574 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 12:54:35,134 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 12:54:35,181 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lemon-Herb Turkey Steaks', sides=['Roasted Sweet Potatoes with Thyme', 'Grilled Zucchini and Bell Peppers', 'Spinach Salad with Lemon-Vinaigrette'])
2024-10-28 12:54:35,185 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNIieYj9n5fsV2sGfzuUY6TpLung', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lemon-Herb Turkey Steaks","sides":["Roasted Sweet Potatoes with Thyme","Grilled Zucchini and Bell Peppers","Spinach Salad with Lemon-Vinaigrette"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lemon-Herb Turkey Steaks', sides=['Roasted Sweet Potatoes with Thyme', 'Grilled Zucchini and Bell Peppers', 'Spinach Salad with Lemon-Vinaigrette']))))], created=1730134476, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=48, prompt_tokens=878, total_tokens=926, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 12:54:35,195 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 12:54:37,206 - Foodee.Orchestrator - INFO - Retrieved 0 session IDs for user GaryTheGrillMaster
2024-10-28 12:54:37,207 - Foodee.Orchestrator - WARNING - No session IDs found for user GaryTheGrillMaster
2024-10-28 12:57:31,624 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 12:57:31,696 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 12:57:31,696 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 12:57:35,767 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 12:57:35,816 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Herb Marinated Lamb Chops', sides=['Roasted Sweet Potato Wedges', 'Garlic Sauteed Spinach with Red Pepper Flakes', 'Refreshing Cucumber and Tomato Salad with Lemon Vinaigrette'])
2024-10-28 12:57:35,822 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNLc8IBizc2FKwKBpJTk4RMpu4Qv', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Herb Marinated Lamb Chops","sides":["Roasted Sweet Potato Wedges","Garlic Sauteed Spinach with Red Pepper Flakes","Refreshing Cucumber and Tomato Salad with Lemon Vinaigrette"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Herb Marinated Lamb Chops', sides=['Roasted Sweet Potato Wedges', 'Garlic Sauteed Spinach with Red Pepper Flakes', 'Refreshing Cucumber and Tomato Salad with Lemon Vinaigrette']))))], created=1730134656, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=52, prompt_tokens=878, total_tokens=930, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 12:57:35,832 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 12:57:40,844 - Foodee.Orchestrator - INFO - Found 0 documents for user GaryTheGrillMaster
2024-10-28 12:57:40,847 - Foodee.Orchestrator - INFO - Sample document:None
2024-10-28 12:57:40,850 - Foodee.Orchestrator - INFO - Retrieved 0 session IDs for user GaryTheGrillMaster
2024-10-28 12:57:40,850 - Foodee.Orchestrator - WARNING - No session IDs found for user GaryTheGrillMaster
2024-10-28 13:08:22,061 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:08:22,070 - Foodee.Orchestrator - ERROR - Fatal error in main: 'FoodeeOrchestrator' object has no attribute 'orchestrate_full_process'
2024-10-28 13:13:03,126 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:13:03,152 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 13:13:03,153 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 13:13:07,521 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:13:07,554 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Herb-Crusted Turkey Breast', sides=['Roasted Sweet Potatoes with Thyme', 'Grilled Asparagus with Lemon Zest'])
2024-10-28 13:13:07,557 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNaeTpNAg7C6NCZ6lneogyVUNFRs', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Herb-Crusted Turkey Breast","sides":["Roasted Sweet Potatoes with Thyme","Grilled Asparagus with Lemon Zest"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Herb-Crusted Turkey Breast', sides=['Roasted Sweet Potatoes with Thyme', 'Grilled Asparagus with Lemon Zest']))))], created=1730135588, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=37, prompt_tokens=878, total_tokens=915, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:13:07,564 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 13:13:12,574 - Foodee.Orchestrator - INFO - Available collections: []
2024-10-28 13:13:12,574 - Foodee.Orchestrator - WARNING - No documents found for user GaryTheGrillMaster in any collection
2024-10-28 13:13:12,575 - Foodee.Orchestrator - WARNING - No session IDs found for user GaryTheGrillMaster
2024-10-28 13:16:36,435 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:16:36,435 - Foodee.Orchestrator - INFO - Using database: foode
2024-10-28 13:16:36,437 - Foodee.Orchestrator - INFO - Collections available: ['recipes', 'messages_outbound', 'user_summary', 'shopping_lists', 'logs', 'users', 'shopping_lists_with_prices', 'results']
2024-10-28 13:16:36,438 - Foodee.Orchestrator - ERROR - Fatal error in main: 'FoodeeOrchestrator' object has no attribute 'orchestrate_full_process'
2024-10-28 13:16:55,582 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:16:55,590 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 13:16:55,591 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 13:16:59,080 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:16:59,119 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Turkey Breast with Herb Lemon Marinade', sides=['Grilled Asparagus with Almonds', 'Oven-Roasted Sweet Potatoes', 'Mixed Green Salad with Olive Oil and Vinegar Dressing'])
2024-10-28 13:16:59,121 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNeNXKN0GDoIFx1kdXUMYOIzdq04', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Turkey Breast with Herb Lemon Marinade","sides":["Grilled Asparagus with Almonds","Oven-Roasted Sweet Potatoes","Mixed Green Salad with Olive Oil and Vinegar Dressing"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Turkey Breast with Herb Lemon Marinade', sides=['Grilled Asparagus with Almonds', 'Oven-Roasted Sweet Potatoes', 'Mixed Green Salad with Olive Oil and Vinegar Dressing']))))], created=1730135819, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=48, prompt_tokens=878, total_tokens=926, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:16:59,131 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 13:17:04,141 - Foodee.Orchestrator - INFO - Available collections: []
2024-10-28 13:17:04,141 - Foodee.Orchestrator - WARNING - No documents found for user GaryTheGrillMaster in any collection
2024-10-28 13:17:04,142 - Foodee.Orchestrator - WARNING - No session IDs found for user GaryTheGrillMaster
2024-10-28 13:19:54,089 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:19:54,098 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5496
2024-10-28 13:19:54,100 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 13:19:54,100 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 13:19:57,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:19:57,498 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Turkey Breast', sides=['Roasted Sweet Potatoes', 'Grilled Asparagus'])
2024-10-28 13:19:57,500 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNhGGH3G8z50Clo19YT3Nna1vjmG', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Turkey Breast","sides":["Roasted Sweet Potatoes","Grilled Asparagus"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Turkey Breast', sides=['Roasted Sweet Potatoes', 'Grilled Asparagus']))))], created=1730135998, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=26, prompt_tokens=878, total_tokens=904, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:19:57,506 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 13:20:02,517 - Foodee.Orchestrator - INFO - Found 35 documents for user GaryTheGrillMaster in results collection
2024-10-28 13:20:02,524 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-28 13:20:02,530 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('671f731ad11ff5753ab9edfd'), 'username': 'GaryTheGrillMaster', 'session_id': 'a5362c4d-0734-4804-a10b-4fdf3b9f6a44', 'content': {'meal_type': {'meal': 'Grilled Lemon Thyme Turkey Breast', 'sides': ['Roasted Sweet Potatoes with Rosemary', 'Sauteed Spinach with Garlic and Olive Oil', 'Carrot and Apple Slaw']}}, 'datetimeimported': datetime.datetime(2024, 10, 28, 7, 18, 50, 545000)}
2024-10-28 13:20:02,530 - Foodee.Orchestrator - INFO - Generating grocery lists for user GaryTheGrillMaster
2024-10-28 13:20:02,531 - Foodee.Orchestrator - ERROR - Error in grocery list generation: name 'sys' is not defined
2024-10-28 13:20:02,531 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'sys' is not defined
2024-10-28 13:20:02,531 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'sys' is not defined
2024-10-28 13:20:26,723 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:20:26,734 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5497
2024-10-28 13:20:26,736 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 13:20:26,736 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 13:20:30,333 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:20:30,374 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lamb Chops with Mint', sides=['Garlic Roasted Potatoes', 'Sautéed Spinach with Lemon', 'Grilled Asparagus'])
2024-10-28 13:20:30,377 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNhmt8xuOFdS2V2WJZFeuX9xJy8X', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lamb Chops with Mint","sides":["Garlic Roasted Potatoes","Sautéed Spinach with Lemon","Grilled Asparagus"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lamb Chops with Mint', sides=['Garlic Roasted Potatoes', 'Sautéed Spinach with Lemon', 'Grilled Asparagus']))))], created=1730136030, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=39, prompt_tokens=878, total_tokens=917, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:20:30,384 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 13:20:35,394 - Foodee.Orchestrator - INFO - Found 36 documents for user GaryTheGrillMaster in results collection
2024-10-28 13:20:35,401 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-28 13:20:35,406 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('671f731ad11ff5753ab9edfd'), 'username': 'GaryTheGrillMaster', 'session_id': 'a5362c4d-0734-4804-a10b-4fdf3b9f6a44', 'content': {'meal_type': {'meal': 'Grilled Lemon Thyme Turkey Breast', 'sides': ['Roasted Sweet Potatoes with Rosemary', 'Sauteed Spinach with Garlic and Olive Oil', 'Carrot and Apple Slaw']}}, 'datetimeimported': datetime.datetime(2024, 10, 28, 7, 18, 50, 545000)}
2024-10-28 13:20:35,407 - Foodee.Orchestrator - INFO - Generating grocery lists for user GaryTheGrillMaster
2024-10-28 13:20:35,428 - Foodee.Orchestrator - ERROR - Error in grocery list generation: main() got an unexpected keyword argument 'username'
2024-10-28 13:20:35,428 - Foodee.Orchestrator - ERROR - Error in orchestration process: main() got an unexpected keyword argument 'username'
2024-10-28 13:20:35,428 - Foodee.Orchestrator - ERROR - Fatal error in main: main() got an unexpected keyword argument 'username'
2024-10-28 13:22:13,106 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-28 13:22:13,129 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5498
2024-10-28 13:22:13,131 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-10-28 13:22:13,131 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 1 iterations
2024-10-28 13:22:18,475 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:22:18,514 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Pork Tenderloin with Honey Mustard Glaze', sides=['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest'])
2024-10-28 13:22:18,517 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANNjVjYKdfaavDi0uFMcYkE0Vm9ib', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Pork Tenderloin with Honey Mustard Glaze","sides":["Roasted Sweet Potato Wedges with Rosemary","Grilled Asparagus with Lemon Zest"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Pork Tenderloin with Honey Mustard Glaze', sides=['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest']))))], created=1730136137, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=40, prompt_tokens=878, total_tokens=918, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:22:18,524 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-10-28 13:22:23,539 - Foodee.Orchestrator - INFO - Found 37 documents for user GaryTheGrillMaster in results collection
2024-10-28 13:22:23,545 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-28 13:22:23,553 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('671f731ad11ff5753ab9edfd'), 'username': 'GaryTheGrillMaster', 'session_id': 'a5362c4d-0734-4804-a10b-4fdf3b9f6a44', 'content': {'meal_type': {'meal': 'Grilled Lemon Thyme Turkey Breast', 'sides': ['Roasted Sweet Potatoes with Rosemary', 'Sauteed Spinach with Garlic and Olive Oil', 'Carrot and Apple Slaw']}}, 'datetimeimported': datetime.datetime(2024, 10, 28, 7, 18, 50, 545000)}
2024-10-28 13:22:23,553 - Foodee.Orchestrator - INFO - Generating grocery lists for user GaryTheGrillMaster
2024-10-28 13:22:25,126 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-28 13:22:25,134 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of pork tenderloin']}, {'category': 'Produce', 'items': ['1 bag of sweet potatoes', '1 bunch of asparagus', '1 lemon']}, {'category': 'Pantry Items', 'items': ['1 jar of honey', '1 bottle of Dijon mustard']}, {'category': 'Spices', 'items': ['1 jar of dried rosemary']}]}
2024-10-28 13:22:25,167 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-ANNjdvKDiwNIhgztSxsIp0CrLnJC9', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of pork tenderloin"]},{"category":"Produce","items":["1 bag of sweet potatoes","1 bunch of asparagus","1 lemon"]},{"category":"Pantry Items","items":["1 jar of honey","1 bottle of Dijon mustard"]},{"category":"Spices","items":["1 jar of dried rosemary"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of pork tenderloin']), ShoppingListItem(category='Produce', items=['1 bag of sweet potatoes', '1 bunch of asparagus', '1 lemon']), ShoppingListItem(category='Pantry Items', items=['1 jar of honey', '1 bottle of Dijon mustard']), ShoppingListItem(category='Spices', items=['1 jar of dried rosemary'])])))], created=1730136145, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=78, prompt_tokens=566, total_tokens=644, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-28 13:22:25,175 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-28 13:22:26,807 - Foodee.Orchestrator - INFO - Generated grocery list for session f7b812d4-6a06-46f6-a6ae-59931665d310
2024-10-28 13:22:26,808 - Foodee.Orchestrator - INFO - Completed full Foodee process for user GaryTheGrillMaster
2024-10-29 22:34:59,356 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-29 22:34:59,441 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5499
2024-10-29 22:34:59,444 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-29 22:34:59,444 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 3 iterations
2024-10-29 22:35:03,222 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:03,291 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer (Spinach & Cheese)', sides=['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati'])
2024-10-29 22:35:03,296 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANspzcQTCmRpDHUlCVP5AQ5f9G2hQ', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer (Spinach & Cheese)","sides":["Brown Lentil Dal (high-protein legume side)","Quinoa Salad with Cucumber and Tomato","Whole Wheat Chapati"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer (Spinach & Cheese)', sides=['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']))))], created=1730255703, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=48, prompt_tokens=826, total_tokens=874, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:04,911 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:04,915 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pilaf', 'Spiced Chickpea and Spinach Salad'])
2024-10-29 22:35:04,919 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANsq1KdFF0cKy9gNHwKeBCa4e2C3w', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Brown Rice Pilaf","Spiced Chickpea and Spinach Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pilaf', 'Spiced Chickpea and Spinach Salad']))))], created=1730255705, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=31, prompt_tokens=826, total_tokens=857, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:06,442 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:06,445 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Mixed Lentil Dal', 'Quinoa Pilaf with Vegetables'])
2024-10-29 22:35:06,451 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-ANsq24k89VL4ldaw0dQaHjLa3f8V5', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Mixed Lentil Dal","Quinoa Pilaf with Vegetables"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Mixed Lentil Dal', 'Quinoa Pilaf with Vegetables']))))], created=1730255706, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=30, prompt_tokens=826, total_tokens=856, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:06,461 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-29 22:35:11,478 - Foodee.Orchestrator - INFO - Found 3 documents for user TrevorClient1 in results collection
2024-10-29 22:35:11,486 - Foodee.Orchestrator - INFO - Retrieved 3 session IDs from results collection
2024-10-29 22:35:11,493 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-29 22:35:11,494 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-29 22:35:14,076 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:14,087 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 large onion', '1 bunch cilantro', '1 head garlic', '1 bag spinach', '1 bell pepper', '1 lemon', '1 package cherry tomatoes', '2 carrots']}, {'category': 'Meat/Protein', 'items': ['1 pack paneer cheese (about 400g)']}, {'category': 'Dairy', 'items': ['1 small container yogurt']}, {'category': 'Pantry Items', 'items': ['1 bag lentils', '1 pack quinoa', '1 box coconut milk', '1 jar tomato paste']}, {'category': 'Spices', 'items': ['1 jar garam masala', '1 jar turmeric', '1 jar cumin', '1 jar coriander powder', '1 jar red chili powder']}]}
2024-10-29 22:35:14,097 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-ANsq9b4DOnFR2r4M5vd56xtAidOKo', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 large onion","1 bunch cilantro","1 head garlic","1 bag spinach","1 bell pepper","1 lemon","1 package cherry tomatoes","2 carrots"]},{"category":"Meat/Protein","items":["1 pack paneer cheese (about 400g)"]},{"category":"Dairy","items":["1 small container yogurt"]},{"category":"Pantry Items","items":["1 bag lentils","1 pack quinoa","1 box coconut milk","1 jar tomato paste"]},{"category":"Spices","items":["1 jar garam masala","1 jar turmeric","1 jar cumin","1 jar coriander powder","1 jar red chili powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 large onion', '1 bunch cilantro', '1 head garlic', '1 bag spinach', '1 bell pepper', '1 lemon', '1 package cherry tomatoes', '2 carrots']), ShoppingListItem(category='Meat/Protein', items=['1 pack paneer cheese (about 400g)']), ShoppingListItem(category='Dairy', items=['1 small container yogurt']), ShoppingListItem(category='Pantry Items', items=['1 bag lentils', '1 pack quinoa', '1 box coconut milk', '1 jar tomato paste']), ShoppingListItem(category='Spices', items=['1 jar garam masala', '1 jar turmeric', '1 jar cumin', '1 jar coriander powder', '1 jar red chili powder'])])))], created=1730255713, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=141, prompt_tokens=556, total_tokens=697, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:14,106 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-29 22:35:16,635 - Foodee.Orchestrator - INFO - Generated grocery list for session 075db91c-f6d2-4bf1-8a1b-09e5248b1408
2024-10-29 22:35:19,504 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:19,514 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '1 lemon', '1 medium onion', '1 bulb of garlic', '1 bunch of cilantro', '1 piece of ginger']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer (around 250g)', '1 can of chickpeas (400g)']}, {'category': 'Dairy', 'items': ['1 small container of yogurt (200g)']}, {'category': 'Pantry Items', 'items': ['1 box of brown rice (1 kg)', '1 can of tomato puree (400g)']}, {'category': 'Spices', 'items': ['1 jar of garam masala', '1 jar of cumin seeds', '1 jar of coriander powder', '1 jar of paprika']}]}
2024-10-29 22:35:19,518 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-ANsqDImAXmu8kMRfEt2wWE24pjdyh', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","1 lemon","1 medium onion","1 bulb of garlic","1 bunch of cilantro","1 piece of ginger"]},{"category":"Meat/Protein","items":["1 block of paneer (around 250g)","1 can of chickpeas (400g)"]},{"category":"Dairy","items":["1 small container of yogurt (200g)"]},{"category":"Pantry Items","items":["1 box of brown rice (1 kg)","1 can of tomato puree (400g)"]},{"category":"Spices","items":["1 jar of garam masala","1 jar of cumin seeds","1 jar of coriander powder","1 jar of paprika"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '1 lemon', '1 medium onion', '1 bulb of garlic', '1 bunch of cilantro', '1 piece of ginger']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer (around 250g)', '1 can of chickpeas (400g)']), ShoppingListItem(category='Dairy', items=['1 small container of yogurt (200g)']), ShoppingListItem(category='Pantry Items', items=['1 box of brown rice (1 kg)', '1 can of tomato puree (400g)']), ShoppingListItem(category='Spices', items=['1 jar of garam masala', '1 jar of cumin seeds', '1 jar of coriander powder', '1 jar of paprika'])])))], created=1730255717, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=158, prompt_tokens=557, total_tokens=715, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:19,529 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-29 22:35:21,058 - Foodee.Orchestrator - INFO - Generated grocery list for session 1efbb291-7435-42ed-84ea-4f6433987d7b
2024-10-29 22:35:23,402 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-29 22:35:23,410 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '1 cucumber', '2 tomatoes', '1 bunch of cilantro', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer cheese (about 200g)']}, {'category': 'Grains', 'items': ['1 bag of quinoa (500g)', '1 pack of whole wheat flour (for chapati)']}, {'category': 'Pantry Items', 'items': ['1 bag of brown lentils (500g)', '1 bottle of vegetable oil']}, {'category': 'Spices', 'items': ['1 jar of cumin seeds', '1 jar of garam masala', '1 jar each of turmeric powder, red chili powder, coriander powder']}]}
2024-10-29 22:35:23,416 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-ANsqIBbESUwKUImKxAq3UDcPSfuwv', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","1 cucumber","2 tomatoes","1 bunch of cilantro","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer cheese (about 200g)"]},{"category":"Grains","items":["1 bag of quinoa (500g)","1 pack of whole wheat flour (for chapati)"]},{"category":"Pantry Items","items":["1 bag of brown lentils (500g)","1 bottle of vegetable oil"]},{"category":"Spices","items":["1 jar of cumin seeds","1 jar of garam masala","1 jar each of turmeric powder, red chili powder, coriander powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '1 cucumber', '2 tomatoes', '1 bunch of cilantro', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer cheese (about 200g)']), ShoppingListItem(category='Grains', items=['1 bag of quinoa (500g)', '1 pack of whole wheat flour (for chapati)']), ShoppingListItem(category='Pantry Items', items=['1 bag of brown lentils (500g)', '1 bottle of vegetable oil']), ShoppingListItem(category='Spices', items=['1 jar of cumin seeds', '1 jar of garam masala', '1 jar each of turmeric powder, red chili powder, coriander powder'])])))], created=1730255722, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_72bbfa6014', usage=CompletionUsage(completion_tokens=152, prompt_tokens=574, total_tokens=726, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-29 22:35:23,439 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-29 22:35:24,566 - Foodee.Orchestrator - INFO - Generated grocery list for session 0754d420-d203-486c-b053-7acc95ad6901
2024-10-29 22:35:24,567 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-10-30 06:57:49,742 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 06:57:49,795 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5502
2024-10-30 06:57:49,846 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 06:57:49,847 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 3 iterations
2024-10-30 06:57:56,200 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 06:57:56,264 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer (Spinach and Cottage Cheese)', sides=['Tandoori Masoor Dal (Spiced Red Lentils)', 'Brown Rice', 'Cucumber Mint Raita (Yogurt and Cucumber Dip)'])
2024-10-30 06:57:56,284 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO0ge2tPaIn9nJuz7ZVgMca0aRmZx', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer (Spinach and Cottage Cheese)","sides":["Tandoori Masoor Dal (Spiced Red Lentils)","Brown Rice","Cucumber Mint Raita (Yogurt and Cucumber Dip)"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer (Spinach and Cottage Cheese)', sides=['Tandoori Masoor Dal (Spiced Red Lentils)', 'Brown Rice', 'Cucumber Mint Raita (Yogurt and Cucumber Dip)']))))], created=1730285876, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=54, prompt_tokens=826, total_tokens=880, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 06:57:58,170 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 06:57:58,172 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Lentil Curry', sides=['Brown Rice', 'Spiced Roasted Cauliflower', 'Mixed Green Salad with Lemon Dressing'])
2024-10-30 06:57:58,197 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO0gge57XJvYajQqWePyn2iig2ujG', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Lentil Curry","sides":["Brown Rice","Spiced Roasted Cauliflower","Mixed Green Salad with Lemon Dressing"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Lentil Curry', sides=['Brown Rice', 'Spiced Roasted Cauliflower', 'Mixed Green Salad with Lemon Dressing']))))], created=1730285878, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=33, prompt_tokens=826, total_tokens=859, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 06:58:00,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 06:58:00,214 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Basmati Rice', 'Cucumber Mint Raita', 'Spiced Lentil Soup'])
2024-10-30 06:58:00,218 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO0giaE4U57ybAO6wHwR7vYpivOb1', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Brown Basmati Rice","Cucumber Mint Raita","Spiced Lentil Soup"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Basmati Rice', 'Cucumber Mint Raita', 'Spiced Lentil Soup']))))], created=1730285880, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=35, prompt_tokens=826, total_tokens=861, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 06:58:00,229 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 06:58:05,257 - Foodee.Orchestrator - INFO - Found 6 documents for user TrevorClient1 in results collection
2024-10-30 06:58:05,267 - Foodee.Orchestrator - INFO - Retrieved 3 session IDs from results collection
2024-10-30 06:58:05,297 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 06:58:05,297 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 06:58:05,298 - Foodee.Orchestrator - ERROR - Error in grocery list generation: name 'sys' is not defined
2024-10-30 06:58:05,298 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'sys' is not defined
2024-10-30 06:58:05,298 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'sys' is not defined
2024-10-30 06:59:11,627 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 06:59:11,667 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5505
2024-10-30 06:59:11,669 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 06:59:11,669 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 06:59:15,753 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 06:59:15,799 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Chickpea and Paneer Tikka Masala', sides=['Quinoa pilaf with vegetables', 'Cucumber raita', 'Whole grain flatbread (Roti)'])
2024-10-30 06:59:15,803 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO0hweRdolUzIr4acG4IsbgvPWK6q', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Chickpea and Paneer Tikka Masala","sides":["Quinoa pilaf with vegetables","Cucumber raita","Whole grain flatbread (Roti)"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Chickpea and Paneer Tikka Masala', sides=['Quinoa pilaf with vegetables', 'Cucumber raita', 'Whole grain flatbread (Roti)']))))], created=1730285956, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=42, prompt_tokens=826, total_tokens=868, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 06:59:15,814 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 06:59:20,837 - Foodee.Orchestrator - INFO - Found 7 documents for user TrevorClient1 in results collection
2024-10-30 06:59:20,845 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 06:59:20,852 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 06:59:20,853 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 06:59:25,717 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 06:59:25,726 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 bag of spinach (about 200g)', '1 bag of mixed bell peppers', '1 bunch of cilantro', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 200g)']}, {'category': 'Dairy', 'items': ['1 container of plain yogurt']}, {'category': 'Pantry Items', 'items': ['1 can of chickpeas', '1 box of quinoa', '1 package of whole grain flatbread (Roti)']}, {'category': 'Spices', 'items': ['Garam masala', 'Cumin', 'Turmeric', 'Coriander powder']}]}
2024-10-30 06:59:25,744 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AO0i3eVwYvWHudnaF7nH2VtZE61L8', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 bag of spinach (about 200g)","1 bag of mixed bell peppers","1 bunch of cilantro","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 200g)"]},{"category":"Dairy","items":["1 container of plain yogurt"]},{"category":"Pantry Items","items":["1 can of chickpeas","1 box of quinoa","1 package of whole grain flatbread (Roti)"]},{"category":"Spices","items":["Garam masala","Cumin","Turmeric","Coriander powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 bag of spinach (about 200g)', '1 bag of mixed bell peppers', '1 bunch of cilantro', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 200g)']), ShoppingListItem(category='Dairy', items=['1 container of plain yogurt']), ShoppingListItem(category='Pantry Items', items=['1 can of chickpeas', '1 box of quinoa', '1 package of whole grain flatbread (Roti)']), ShoppingListItem(category='Spices', items=['Garam masala', 'Cumin', 'Turmeric', 'Coriander powder'])])))], created=1730285963, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=134, prompt_tokens=569, total_tokens=703, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 06:59:25,754 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-30 06:59:27,573 - Foodee.Orchestrator - INFO - Generated grocery list for session ed7bbe04-bc73-4463-9615-d6d90ee37f26
2024-10-30 06:59:27,573 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-10-30 06:59:27,576 - Foodee.Orchestrator - ERROR - Error in price lookup: No module named 'price_lookup'
2024-10-30 06:59:27,576 - Foodee.Orchestrator - ERROR - Error in orchestration process: No module named 'price_lookup'
2024-10-30 06:59:27,576 - Foodee.Orchestrator - ERROR - Fatal error in main: No module named 'price_lookup'
2024-10-30 07:04:33,982 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 07:04:34,018 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5506
2024-10-30 07:04:34,020 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 07:04:34,020 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 07:04:37,753 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 07:04:37,801 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Brown Rice', 'Chickpea Salad'])
2024-10-30 07:04:37,805 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO0n8wE7KO0plhnHNOSHAKvYiqfEb', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Brown Rice","Chickpea Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Brown Rice', 'Chickpea Salad']))))], created=1730286278, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=23, prompt_tokens=826, total_tokens=849, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 07:04:37,813 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 07:04:42,833 - Foodee.Orchestrator - INFO - Found 8 documents for user TrevorClient1 in results collection
2024-10-30 07:04:42,842 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 07:04:42,849 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 07:04:42,850 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 07:04:46,340 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 07:04:46,351 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of fresh spinach (about 200g)', '1 bunch of cilantro', '1 lemon', '2 tomatoes', '1 onion', '1 small cucumber']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer cheese (200g)', '1 can of chickpeas (400g)']}, {'category': 'Grains', 'items': ['1 bag of brown rice (1kg)']}, {'category': 'Dairy', 'items': ['1 small tub of plain yogurt']}, {'category': 'Spices', 'items': ['1 small jar of cumin seeds', '1 small jar of garam masala']}]}
2024-10-30 07:04:46,359 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AO0nFfJKQzwNtyI4KFMPMx6XvIUjK', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of fresh spinach (about 200g)","1 bunch of cilantro","1 lemon","2 tomatoes","1 onion","1 small cucumber"]},{"category":"Meat/Protein","items":["1 block of paneer cheese (200g)","1 can of chickpeas (400g)"]},{"category":"Grains","items":["1 bag of brown rice (1kg)"]},{"category":"Dairy","items":["1 small tub of plain yogurt"]},{"category":"Spices","items":["1 small jar of cumin seeds","1 small jar of garam masala"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of fresh spinach (about 200g)', '1 bunch of cilantro', '1 lemon', '2 tomatoes', '1 onion', '1 small cucumber']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer cheese (200g)', '1 can of chickpeas (400g)']), ShoppingListItem(category='Grains', items=['1 bag of brown rice (1kg)']), ShoppingListItem(category='Dairy', items=['1 small tub of plain yogurt']), ShoppingListItem(category='Spices', items=['1 small jar of cumin seeds', '1 small jar of garam masala'])])))], created=1730286285, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=131, prompt_tokens=549, total_tokens=680, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 07:04:46,366 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-30 07:04:47,993 - Foodee.Orchestrator - INFO - Generated grocery list for session 264df3e3-d7ef-49d2-80b8-a5d9dd1683c8
2024-10-30 07:04:47,993 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-10-30 07:04:48,082 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 07:04:48,090 - perplexity_find_prices - INFO - Processing item 1/12: 1 bag of fresh spinach (about 200g)
2024-10-30 07:04:53,032 - perplexity_find_prices - INFO - Processing item 2/12: 1 bunch of cilantro
2024-10-30 07:04:57,703 - perplexity_find_prices - INFO - Processing item 3/12: 1 lemon
2024-10-30 07:05:06,288 - perplexity_find_prices - INFO - Processing item 4/12: 2 tomatoes
2024-10-30 07:05:12,351 - perplexity_find_prices - INFO - Processing item 5/12: 1 onion
2024-10-30 07:05:22,073 - perplexity_find_prices - INFO - Processing item 6/12: 1 small cucumber
2024-10-30 07:05:28,110 - perplexity_find_prices - INFO - Processing item 7/12: 1 block of paneer cheese (200g)
2024-10-30 07:05:36,110 - perplexity_find_prices - INFO - Processing item 8/12: 1 can of chickpeas (400g)
2024-10-30 07:05:43,164 - perplexity_find_prices - INFO - Processing item 9/12: 1 bag of brown rice (1kg)
2024-10-30 07:05:47,580 - perplexity_find_prices - INFO - Processing item 10/12: 1 small tub of plain yogurt
2024-10-30 07:05:50,353 - perplexity_find_prices - INFO - Processing item 11/12: 1 small jar of cumin seeds
2024-10-30 07:06:04,159 - perplexity_find_prices - INFO - Processing item 12/12: 1 small jar of garam masala
2024-10-30 07:06:09,994 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-10-30 07:06:09,995 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 264df3e3-d7ef-49d2-80b8-a5d9dd1683c8
2024-10-30 07:06:09,995 - Foodee.Orchestrator - INFO - Total price for shopping list: $27.38
2024-10-30 07:06:09,996 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-10-30 09:26:26,263 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:26:26,320 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5507
2024-10-30 09:26:26,322 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 09:26:26,323 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 09:26:30,258 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:26:30,311 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Quinoa Pilaf', 'Mixed Vegetable Sabzi', 'Cucumber Raita'])
2024-10-30 09:26:30,316 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO30Pgz4rHkTyurFCIpPSSr9tFqXZ', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Quinoa Pilaf","Mixed Vegetable Sabzi","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Quinoa Pilaf', 'Mixed Vegetable Sabzi', 'Cucumber Raita']))))], created=1730294789, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=30, prompt_tokens=826, total_tokens=856, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:26:30,325 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 09:26:35,343 - Foodee.Orchestrator - INFO - Found 9 documents for user TrevorClient1 in results collection
2024-10-30 09:26:35,348 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 09:26:35,355 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 09:26:35,355 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 09:26:35,355 - Foodee.Orchestrator - ERROR - Error in grocery list generation: name 'sys' is not defined
2024-10-30 09:26:35,356 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'sys' is not defined
2024-10-30 09:26:35,356 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'sys' is not defined
2024-10-30 09:26:48,780 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:26:48,814 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5508
2024-10-30 09:26:48,816 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 09:26:48,817 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 09:26:51,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:26:51,689 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Salad with Chickpeas and Vegetables', 'Raita (Yogurt and Cucumber Dip)', 'Whole Wheat Chapati'])
2024-10-30 09:26:51,692 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO30lVHl7L5SjsUnNCCYK2XKuKEHW', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Quinoa Salad with Chickpeas and Vegetables","Raita (Yogurt and Cucumber Dip)","Whole Wheat Chapati"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Salad with Chickpeas and Vegetables', 'Raita (Yogurt and Cucumber Dip)', 'Whole Wheat Chapati']))))], created=1730294811, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=44, prompt_tokens=826, total_tokens=870, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:26:51,700 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 09:26:56,718 - Foodee.Orchestrator - INFO - Found 10 documents for user TrevorClient1 in results collection
2024-10-30 09:26:56,724 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 09:26:56,731 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 09:26:56,732 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 09:27:00,046 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:27:00,050 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 bag of mixed salad greens (about 200g)', '2 onions', '1 red bell pepper', '1 lemon', '1 small bunch of cilantro']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer (about 250g)', '1 can of chickpeas (400g)']}, {'category': 'Dairy', 'items': ['1 tub of plain yogurt (500g)']}, {'category': 'Pantry Items', 'items': ['1 pack of whole wheat flour (1kg)', '1 box of quinoa (500g)', '1 can of tomato puree (400g)']}, {'category': 'Spices', 'items': ['Garam masala', 'Cumin powder', 'Coriander powder', 'Red chili powder', 'Turmeric powder']}]}
2024-10-30 09:27:00,075 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AO30rwIvIRfEih6Te3csrYeGvMMkG', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 bag of mixed salad greens (about 200g)","2 onions","1 red bell pepper","1 lemon","1 small bunch of cilantro"]},{"category":"Meat/Protein","items":["1 block of paneer (about 250g)","1 can of chickpeas (400g)"]},{"category":"Dairy","items":["1 tub of plain yogurt (500g)"]},{"category":"Pantry Items","items":["1 pack of whole wheat flour (1kg)","1 box of quinoa (500g)","1 can of tomato puree (400g)"]},{"category":"Spices","items":["Garam masala","Cumin powder","Coriander powder","Red chili powder","Turmeric powder"]}]}\n', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 bag of mixed salad greens (about 200g)', '2 onions', '1 red bell pepper', '1 lemon', '1 small bunch of cilantro']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer (about 250g)', '1 can of chickpeas (400g)']), ShoppingListItem(category='Dairy', items=['1 tub of plain yogurt (500g)']), ShoppingListItem(category='Pantry Items', items=['1 pack of whole wheat flour (1kg)', '1 box of quinoa (500g)', '1 can of tomato puree (400g)']), ShoppingListItem(category='Spices', items=['Garam masala', 'Cumin powder', 'Coriander powder', 'Red chili powder', 'Turmeric powder'])])))], created=1730294817, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=165, prompt_tokens=571, total_tokens=736, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:27:00,081 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-30 09:27:01,594 - Foodee.Orchestrator - INFO - Generated grocery list for session c5e50c7d-694a-4003-badb-abf7a495fe69
2024-10-30 09:27:06,596 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-10-30 09:27:06,645 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:27:06,648 - perplexity_find_prices - INFO - Processing item 1/17: 1 cucumber
2024-10-30 09:27:17,682 - perplexity_find_prices - INFO - Processing item 2/17: 1 bag of mixed salad greens (about 200g)
2024-10-30 09:27:27,760 - perplexity_find_prices - INFO - Processing item 3/17: 2 onions
2024-10-30 09:27:36,442 - perplexity_find_prices - INFO - Processing item 4/17: 1 red bell pepper
2024-10-30 09:27:43,350 - perplexity_find_prices - INFO - Processing item 5/17: 1 lemon
2024-10-30 09:27:53,594 - perplexity_find_prices - INFO - Processing item 6/17: 1 small bunch of cilantro
2024-10-30 09:27:56,593 - perplexity_find_prices - INFO - Processing item 7/17: 1 block of paneer (about 250g)
2024-10-30 09:28:05,247 - perplexity_find_prices - INFO - Processing item 8/17: 1 can of chickpeas (400g)
2024-10-30 09:28:11,408 - perplexity_find_prices - INFO - Processing item 9/17: 1 tub of plain yogurt (500g)
2024-10-30 09:28:18,144 - perplexity_find_prices - INFO - Processing item 10/17: 1 pack of whole wheat flour (1kg)
2024-10-30 09:28:25,502 - perplexity_find_prices - INFO - Processing item 11/17: 1 box of quinoa (500g)
2024-10-30 09:28:31,768 - perplexity_find_prices - INFO - Processing item 12/17: 1 can of tomato puree (400g)
2024-10-30 09:28:40,435 - perplexity_find_prices - INFO - Processing item 13/17: Garam masala
2024-10-30 09:28:47,751 - perplexity_find_prices - INFO - Processing item 14/17: Cumin powder
2024-10-30 09:29:17,761 - perplexity_find_prices - ERROR - Error in API request: HTTPSConnectionPool(host='api.perplexity.ai', port=443): Read timed out. (read timeout=30)
2024-10-30 09:29:32,768 - perplexity_find_prices - INFO - Processing item 15/17: Coriander powder
2024-10-30 09:29:37,321 - perplexity_find_prices - INFO - Processing item 16/17: Red chili powder
2024-10-30 09:29:43,083 - perplexity_find_prices - INFO - Processing item 17/17: Turmeric powder
2024-10-30 09:29:48,245 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-10-30 09:29:48,246 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session c5e50c7d-694a-4003-badb-abf7a495fe69
2024-10-30 09:29:48,246 - Foodee.Orchestrator - INFO - Total price for shopping list: $49.69
2024-10-30 09:29:53,257 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-10-30 09:30:00,159 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:30:00,163 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-10-30 09:30:00,164 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1
2024-10-30 09:30:00,192 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-10-30 09:30:00,192 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-10-30 09:37:24,918 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:37:24,928 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5509
2024-10-30 09:37:24,929 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 09:37:24,929 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 09:37:27,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:37:27,607 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf', 'Mixed Vegetable Raita'])
2024-10-30 09:37:27,611 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO3B1AqPSQHhA7eWusvtnJsVOFpHY', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Quinoa Pilaf","Mixed Vegetable Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf', 'Mixed Vegetable Raita']))))], created=1730295447, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=27, prompt_tokens=826, total_tokens=853, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:37:27,619 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 09:37:32,631 - Foodee.Orchestrator - INFO - Found 11 documents for user TrevorClient1 in results collection
2024-10-30 09:37:32,637 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 09:37:32,644 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 09:37:32,644 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 09:37:35,204 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:37:35,212 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 lemon', '1 medium onion', '1 medium tomato', '1 cucumber', '1 small carrot', '1 bunch cilantro', '1 bell pepper (any color)']}, {'category': 'Meat/Protein', 'items': ['1 block paneer cheese (about 400g)']}, {'category': 'Dairy', 'items': ['1 pint plain yogurt']}, {'category': 'Pantry Items', 'items': ['1 pack quinoa', '1 can coconut milk (400ml)', '1 pack basmati rice (for the pilaf base)']}, {'category': 'Spices', 'items': ['1 pack turmeric powder', '1 pack garam masala', '1 pack cumin seeds']}]}
2024-10-30 09:37:35,241 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AO3B7yF0kkcNckdigpQKF9w0Mx9Ck', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 lemon","1 medium onion","1 medium tomato","1 cucumber","1 small carrot","1 bunch cilantro","1 bell pepper (any color)"]},{"category":"Meat/Protein","items":["1 block paneer cheese (about 400g)"]},{"category":"Dairy","items":["1 pint plain yogurt"]},{"category":"Pantry Items","items":["1 pack quinoa","1 can coconut milk (400ml)","1 pack basmati rice (for the pilaf base)"]},{"category":"Spices","items":["1 pack turmeric powder","1 pack garam masala","1 pack cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 lemon', '1 medium onion', '1 medium tomato', '1 cucumber', '1 small carrot', '1 bunch cilantro', '1 bell pepper (any color)']), ShoppingListItem(category='Meat/Protein', items=['1 block paneer cheese (about 400g)']), ShoppingListItem(category='Dairy', items=['1 pint plain yogurt']), ShoppingListItem(category='Pantry Items', items=['1 pack quinoa', '1 can coconut milk (400ml)', '1 pack basmati rice (for the pilaf base)']), ShoppingListItem(category='Spices', items=['1 pack turmeric powder', '1 pack garam masala', '1 pack cumin seeds'])])))], created=1730295453, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=138, prompt_tokens=553, total_tokens=691, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:37:35,249 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-30 09:37:36,508 - Foodee.Orchestrator - INFO - Generated grocery list for session 680ad427-1e60-45f1-9f17-99cba9380cf6
2024-10-30 09:37:41,521 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-10-30 09:37:41,562 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:37:41,566 - perplexity_find_prices - INFO - Processing item 1/15: 1 lemon
2024-10-30 09:37:51,073 - perplexity_find_prices - INFO - Processing item 2/15: 1 medium onion
2024-10-30 09:38:01,769 - perplexity_find_prices - INFO - Processing item 3/15: 1 medium tomato
2024-10-30 09:38:13,583 - perplexity_find_prices - INFO - Processing item 4/15: 1 cucumber
2024-10-30 09:38:32,788 - perplexity_find_prices - INFO - Processing item 5/15: 1 small carrot
2024-10-30 09:38:40,541 - perplexity_find_prices - INFO - Processing item 6/15: 1 bunch cilantro
2024-10-30 09:38:43,997 - perplexity_find_prices - INFO - Processing item 7/15: 1 bell pepper (any color)
2024-10-30 09:38:54,047 - perplexity_find_prices - INFO - Processing item 8/15: 1 block paneer cheese (about 400g)
2024-10-30 09:39:00,207 - perplexity_find_prices - INFO - Processing item 9/15: 1 pint plain yogurt
2024-10-30 09:39:10,143 - perplexity_find_prices - INFO - Processing item 10/15: 1 pack quinoa
2024-10-30 09:39:16,936 - perplexity_find_prices - INFO - Processing item 11/15: 1 can coconut milk (400ml)
2024-10-30 09:39:23,339 - perplexity_find_prices - INFO - Processing item 12/15: 1 pack basmati rice (for the pilaf base)
2024-10-30 09:39:27,779 - perplexity_find_prices - WARNING - Could not extract price from response for item: 1 pack basmati rice (for the pilaf base)
2024-10-30 09:39:34,215 - perplexity_find_prices - WARNING - Could not extract price from response for item: 1 pack basmati rice (for the pilaf base)
2024-10-30 09:39:44,531 - perplexity_find_prices - WARNING - Could not extract price from response for item: 1 pack basmati rice (for the pilaf base)
2024-10-30 09:39:44,531 - perplexity_find_prices - WARNING - Using fallback price for 1 pack basmati rice (for the pilaf base): $5.99
2024-10-30 09:39:44,531 - perplexity_find_prices - INFO - Processing item 13/15: 1 pack turmeric powder
2024-10-30 09:39:57,027 - perplexity_find_prices - INFO - Processing item 14/15: 1 pack garam masala
2024-10-30 09:40:05,234 - perplexity_find_prices - INFO - Processing item 15/15: 1 pack cumin seeds
2024-10-30 09:40:18,204 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-10-30 09:40:18,205 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 680ad427-1e60-45f1-9f17-99cba9380cf6
2024-10-30 09:40:18,205 - Foodee.Orchestrator - INFO - Total price for shopping list: $440.86
2024-10-30 09:40:23,218 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-10-30 09:40:23,239 - Foodee.Orchestrator - ERROR - Error in message formatting: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-10-30 09:40:23,239 - Foodee.Orchestrator - ERROR - Error in orchestration process: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-10-30 09:40:23,239 - Foodee.Orchestrator - ERROR - Fatal error in main: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-10-30 09:47:43,156 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:47:43,192 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5510
2024-10-30 09:47:43,194 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-10-30 09:47:43,194 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-10-30 09:47:47,059 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:47:47,089 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Lentil and Spinach Salad'])
2024-10-30 09:47:47,091 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AO3L0lWDZKKefyKA9Vbc1y7eOM4oV', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Quinoa Pilaf with Mixed Vegetables","Lentil and Spinach Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Lentil and Spinach Salad']))))], created=1730296066, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=34, prompt_tokens=826, total_tokens=860, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:47:47,098 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-10-30 09:47:52,108 - Foodee.Orchestrator - INFO - Found 12 documents for user TrevorClient1 in results collection
2024-10-30 09:47:52,113 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-10-30 09:47:52,121 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-10-30 09:47:52,121 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-10-30 09:47:58,454 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:47:58,458 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack paneer (approximately 250g)']}, {'category': 'Produce', 'items': ['1 bag spinach (about 200g)', '1 small ginger root', '1 head of garlic', '1 medium onion', '1 medium green bell pepper', '1 lemon', '1 bunch cilantro']}, {'category': 'Dairy', 'items': ['1 small tub plain yogurt (about 200g)', '1 carton milk (1 liter)']}, {'category': 'Pantry Items', 'items': ['1 pack quinoa (about 500g)', '1 pack red lentils (about 500g)', '1 can diced tomatoes (400g)', '1 bag rice (1kg)']}, {'category': 'Spices', 'items': ['1 jar garam masala', '1 jar turmeric', '1 jar cumin', '1 jar coriander', '1 jar chili powder', '1 jar paprika']}]}
2024-10-30 09:47:58,478 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AO3L6l32KepwHfP3ReUfOoOUl8dv6', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack paneer (approximately 250g)"]},{"category":"Produce","items":["1 bag spinach (about 200g)","1 small ginger root","1 head of garlic","1 medium onion","1 medium green bell pepper","1 lemon","1 bunch cilantro"]},{"category":"Dairy","items":["1 small tub plain yogurt (about 200g)","1 carton milk (1 liter)"]},{"category":"Pantry Items","items":["1 pack quinoa (about 500g)","1 pack red lentils (about 500g)","1 can diced tomatoes (400g)","1 bag rice (1kg)"]},{"category":"Spices","items":["1 jar garam masala","1 jar turmeric","1 jar cumin","1 jar coriander","1 jar chili powder","1 jar paprika"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack paneer (approximately 250g)']), ShoppingListItem(category='Produce', items=['1 bag spinach (about 200g)', '1 small ginger root', '1 head of garlic', '1 medium onion', '1 medium green bell pepper', '1 lemon', '1 bunch cilantro']), ShoppingListItem(category='Dairy', items=['1 small tub plain yogurt (about 200g)', '1 carton milk (1 liter)']), ShoppingListItem(category='Pantry Items', items=['1 pack quinoa (about 500g)', '1 pack red lentils (about 500g)', '1 can diced tomatoes (400g)', '1 bag rice (1kg)']), ShoppingListItem(category='Spices', items=['1 jar garam masala', '1 jar turmeric', '1 jar cumin', '1 jar coriander', '1 jar chili powder', '1 jar paprika'])])))], created=1730296072, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_90354628f2', usage=CompletionUsage(completion_tokens=183, prompt_tokens=560, total_tokens=743, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-10-30 09:47:58,486 - generate_shopping_list - INFO - Shopping list generation complete.
2024-10-30 09:48:00,332 - Foodee.Orchestrator - INFO - Generated grocery list for session c43d1681-5175-4f79-abac-0c3b0d5dedc2
2024-10-30 09:48:05,341 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-10-30 09:48:05,388 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-10-30 09:48:05,392 - perplexity_find_prices - INFO - Processing item 1/20: 1 pack paneer (approximately 250g)
2024-10-30 09:48:11,436 - perplexity_find_prices - INFO - Processing item 2/20: 1 bag spinach (about 200g)
2024-10-30 09:48:17,902 - perplexity_find_prices - INFO - Processing item 3/20: 1 small ginger root
2024-10-30 09:48:25,603 - perplexity_find_prices - INFO - Processing item 4/20: 1 head of garlic
2024-10-30 09:48:30,950 - perplexity_find_prices - INFO - Processing item 5/20: 1 medium onion
2024-10-30 09:48:57,586 - perplexity_find_prices - INFO - Processing item 6/20: 1 medium green bell pepper
2024-10-30 09:49:00,851 - perplexity_find_prices - INFO - Processing item 7/20: 1 lemon
2024-10-30 09:49:12,852 - perplexity_find_prices - INFO - Processing item 8/20: 1 bunch cilantro
2024-10-30 09:49:18,500 - perplexity_find_prices - INFO - Processing item 9/20: 1 small tub plain yogurt (about 200g)
2024-10-30 09:49:26,128 - perplexity_find_prices - INFO - Processing item 10/20: 1 carton milk (1 liter)
2024-10-30 09:49:56,137 - perplexity_find_prices - ERROR - Error in API request: HTTPSConnectionPool(host='api.perplexity.ai', port=443): Read timed out. (read timeout=30)
2024-10-30 09:50:05,619 - perplexity_find_prices - INFO - Processing item 11/20: 1 pack quinoa (about 500g)
2024-10-30 09:50:15,161 - perplexity_find_prices - INFO - Processing item 12/20: 1 pack red lentils (about 500g)
2024-10-30 09:50:28,090 - perplexity_find_prices - INFO - Processing item 13/20: 1 can diced tomatoes (400g)
2024-10-30 09:50:34,333 - perplexity_find_prices - INFO - Processing item 14/20: 1 bag rice (1kg)
2024-10-30 09:50:44,076 - perplexity_find_prices - INFO - Processing item 15/20: 1 jar garam masala
2024-10-30 09:50:52,547 - perplexity_find_prices - INFO - Processing item 16/20: 1 jar turmeric
2024-10-30 09:51:19,115 - perplexity_find_prices - INFO - Processing item 17/20: 1 jar cumin
2024-10-30 09:51:32,943 - perplexity_find_prices - INFO - Processing item 18/20: 1 jar coriander
2024-10-30 09:51:41,161 - perplexity_find_prices - INFO - Processing item 19/20: 1 jar chili powder
2024-10-30 09:51:47,397 - perplexity_find_prices - INFO - Processing item 20/20: 1 jar paprika
2024-10-30 09:51:57,222 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-10-30 09:51:57,223 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session c43d1681-5175-4f79-abac-0c3b0d5dedc2
2024-10-30 09:51:57,223 - Foodee.Orchestrator - INFO - Total price for shopping list: $70.48
2024-10-30 09:52:02,238 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-10-30 09:52:05,974 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-30 09:52:05,976 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-10-30 09:52:05,976 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1
2024-10-30 09:52:06,014 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-10-30 09:52:06,015 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-11-02 05:37:10,902 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 05:37:10,934 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5511
2024-11-02 05:37:10,936 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-11-02 05:37:10,936 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 2 iterations
2024-11-02 05:37:22,248 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 05:37:22,292 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled BBQ Pork Tenderloin', sides=['Baked Sweet Potato Wedges', 'Mixed Green Salad with Cucumbers and Radishes', 'Grilled Corn on the Cob'])
2024-11-02 05:37:22,297 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP4rHaSd5oPJhvbkJWdz6x5N4JOsc', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled BBQ Pork Tenderloin","sides":["Baked Sweet Potato Wedges","Mixed Green Salad with Cucumbers and Radishes","Grilled Corn on the Cob"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled BBQ Pork Tenderloin', sides=['Baked Sweet Potato Wedges', 'Mixed Green Salad with Cucumbers and Radishes', 'Grilled Corn on the Cob']))))], created=1730540239, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=41, prompt_tokens=878, total_tokens=919, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 05:37:23,558 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 05:37:23,561 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lamb Chops', sides=['Roasted Sweet Potatoes', 'Sautéed Spinach with Garlic'])
2024-11-02 05:37:23,564 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP4rJBXIG2FZ6OmYH9UL2OUnnC16i', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lamb Chops","sides":["Roasted Sweet Potatoes","Sautéed Spinach with Garlic"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lamb Chops', sides=['Roasted Sweet Potatoes', 'Sautéed Spinach with Garlic']))))], created=1730540241, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=30, prompt_tokens=878, total_tokens=908, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 05:37:23,573 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-11-02 05:37:28,579 - Foodee.Orchestrator - INFO - Found 39 documents for user GaryTheGrillMaster in results collection
2024-11-02 05:37:28,586 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-02 05:37:28,595 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('671f731ad11ff5753ab9edfd'), 'username': 'GaryTheGrillMaster', 'session_id': 'a5362c4d-0734-4804-a10b-4fdf3b9f6a44', 'content': {'meal_type': {'meal': 'Grilled Lemon Thyme Turkey Breast', 'sides': ['Roasted Sweet Potatoes with Rosemary', 'Sauteed Spinach with Garlic and Olive Oil', 'Carrot and Apple Slaw']}}, 'datetimeimported': datetime.datetime(2024, 10, 28, 7, 18, 50, 545000)}
2024-11-02 05:37:28,596 - Foodee.Orchestrator - INFO - Generating grocery lists for user GaryTheGrillMaster
2024-11-02 05:37:38,357 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 05:37:38,362 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['2 medium sweet potatoes', '1 bag of spinach (about 200g)', '1 bulb of garlic']}, {'category': 'Meat/Protein', 'items': ['1 pack of lamb chops (about 1.2kg)']}, {'category': 'Pantry Items', 'items': ['Olive oil']}, {'category': 'Spices', 'items': ['Salt', 'Pepper']}]}
2024-11-02 05:37:38,371 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP4rVZtAM3HTD3O1NifOKJcjnLjH6', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["2 medium sweet potatoes","1 bag of spinach (about 200g)","1 bulb of garlic"]},{"category":"Meat/Protein","items":["1 pack of lamb chops (about 1.2kg)"]},{"category":"Pantry Items","items":["Olive oil"]},{"category":"Spices","items":["Salt","Pepper"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['2 medium sweet potatoes', '1 bag of spinach (about 200g)', '1 bulb of garlic']), ShoppingListItem(category='Meat/Protein', items=['1 pack of lamb chops (about 1.2kg)']), ShoppingListItem(category='Pantry Items', items=['Olive oil']), ShoppingListItem(category='Spices', items=['Salt', 'Pepper'])])))], created=1730540253, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=84, prompt_tokens=560, total_tokens=644, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 05:37:38,380 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 05:37:40,922 - Foodee.Orchestrator - INFO - Generated grocery list for session 4833213e-cff8-435e-b20b-142a150a27c3
2024-11-02 05:37:45,163 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 05:37:45,169 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of pork tenderloin (about 1-1.5 lbs)']}, {'category': 'Produce', 'items': ['4-6 sweet potatoes', '1 bag of mixed greens', '1 cucumber', '1 bunch of radishes', '4 ears of corn']}, {'category': 'Pantry Items', 'items': ['1 bottle of BBQ sauce']}, {'category': 'Dairy', 'items': ['Optional: 1 block or bag of cheese (for salad, if desired)']}, {'category': 'Spices', 'items': ['Optional: Seasoning for sweet potatoes (e.g., paprika, cayenne pepper)']}]}
2024-11-02 05:37:45,172 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP4rb3K7MU5MhmpK5z8iUOXOMz0Fy', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of pork tenderloin (about 1-1.5 lbs)"]},{"category":"Produce","items":["4-6 sweet potatoes","1 bag of mixed greens","1 cucumber","1 bunch of radishes","4 ears of corn"]},{"category":"Pantry Items","items":["1 bottle of BBQ sauce"]},{"category":"Dairy","items":["Optional: 1 block or bag of cheese (for salad, if desired)"]},{"category":"Spices","items":["Optional: Seasoning for sweet potatoes (e.g., paprika, cayenne pepper)"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of pork tenderloin (about 1-1.5 lbs)']), ShoppingListItem(category='Produce', items=['4-6 sweet potatoes', '1 bag of mixed greens', '1 cucumber', '1 bunch of radishes', '4 ears of corn']), ShoppingListItem(category='Pantry Items', items=['1 bottle of BBQ sauce']), ShoppingListItem(category='Dairy', items=['Optional: 1 block or bag of cheese (for salad, if desired)']), ShoppingListItem(category='Spices', items=['Optional: Seasoning for sweet potatoes (e.g., paprika, cayenne pepper)'])])))], created=1730540259, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=132, prompt_tokens=569, total_tokens=701, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 05:37:45,179 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 05:37:46,543 - Foodee.Orchestrator - INFO - Generated grocery list for session b931aca6-30d6-49ec-9761-a6f4e1f1135c
2024-11-02 05:37:51,550 - Foodee.Orchestrator - INFO - Starting price lookup for user GaryTheGrillMaster
2024-11-02 05:37:51,608 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 05:37:51,611 - perplexity_find_prices - INFO - Processing item 1/7: 2 medium sweet potatoes
2024-11-02 05:37:57,875 - perplexity_find_prices - INFO - Processing item 2/7: 1 bag of spinach (about 200g)
2024-11-02 05:38:06,791 - perplexity_find_prices - INFO - Processing item 3/7: 1 bulb of garlic
2024-11-02 05:38:12,959 - perplexity_find_prices - INFO - Processing item 4/7: 1 pack of lamb chops (about 1.2kg)
2024-11-02 05:38:21,122 - perplexity_find_prices - INFO - Processing item 5/7: Olive oil
2024-11-02 05:38:27,406 - perplexity_find_prices - INFO - Processing item 6/7: Salt
2024-11-02 05:38:30,639 - perplexity_find_prices - INFO - Processing item 7/7: Pepper
2024-11-02 05:38:36,698 - perplexity_find_prices - INFO - Generated shopping list with prices for user: GaryTheGrillMaster
2024-11-02 05:38:36,698 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 4833213e-cff8-435e-b20b-142a150a27c3
2024-11-02 05:38:36,698 - Foodee.Orchestrator - INFO - Total price for shopping list: $25.71
2024-11-02 05:38:36,701 - perplexity_find_prices - INFO - Processing item 1/9: 1 pack of pork tenderloin (about 1-1.5 lbs)
2024-11-02 05:38:44,927 - perplexity_find_prices - INFO - Processing item 2/9: 4-6 sweet potatoes
2024-11-02 05:38:56,097 - perplexity_find_prices - INFO - Processing item 3/9: 1 bag of mixed greens
2024-11-02 05:39:02,514 - perplexity_find_prices - INFO - Processing item 4/9: 1 cucumber
2024-11-02 05:39:09,701 - perplexity_find_prices - INFO - Processing item 5/9: 1 bunch of radishes
2024-11-02 05:39:12,149 - perplexity_find_prices - INFO - Processing item 6/9: 4 ears of corn
2024-11-02 05:39:20,053 - perplexity_find_prices - INFO - Processing item 7/9: 1 bottle of BBQ sauce
2024-11-02 05:39:24,746 - perplexity_find_prices - INFO - Processing item 8/9: Optional: 1 block or bag of cheese (for salad, if desired)
2024-11-02 05:39:27,600 - perplexity_find_prices - INFO - Processing item 9/9: Optional: Seasoning for sweet potatoes (e.g., paprika, cayenne pepper)
2024-11-02 05:39:32,765 - perplexity_find_prices - INFO - Generated shopping list with prices for user: GaryTheGrillMaster
2024-11-02 05:39:32,766 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session b931aca6-30d6-49ec-9761-a6f4e1f1135c
2024-11-02 05:39:32,766 - Foodee.Orchestrator - INFO - Total price for shopping list: $26.45
2024-11-02 05:39:37,776 - Foodee.Orchestrator - INFO - Starting message formatting for user GaryTheGrillMaster
2024-11-02 05:39:41,419 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 05:39:41,422 - Foodee.Orchestrator - INFO - Completed message formatting for user GaryTheGrillMaster
2024-11-02 05:39:41,423 - Foodee.Orchestrator - INFO - Displaying formatted messages for user GaryTheGrillMaster
2024-11-02 05:39:41,438 - Foodee.Orchestrator - INFO - Completed displaying messages for user GaryTheGrillMaster
2024-11-02 05:39:41,438 - Foodee.Orchestrator - INFO - Completed full Foodee process for user GaryTheGrillMaster
2024-11-02 06:02:49,876 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:02:49,885 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5513
2024-11-02 06:02:49,887 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 06:02:49,887 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-02 06:02:54,125 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:02:54,166 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Chana Masala with Palak Paneer', sides=['Brown Rice', 'Cucumber Raita'])
2024-11-02 06:02:54,170 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5G0eBYjYhZIjnbVf358uxJtnx5Z', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Chana Masala with Palak Paneer","sides":["Brown Rice","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Chana Masala with Palak Paneer', sides=['Brown Rice', 'Cucumber Raita']))))], created=1730541772, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=28, prompt_tokens=826, total_tokens=854, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:02:55,242 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:02:55,244 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Chickpea and Cucumber Salad'])
2024-11-02 06:02:55,247 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5G18qdEDYB2VxBDoh3oFblCtiYC', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Quinoa Pilaf with Mixed Vegetables","Chickpea and Cucumber Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Chickpea and Cucumber Salad']))))], created=1730541773, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=34, prompt_tokens=826, total_tokens=860, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:02:55,256 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 06:03:00,271 - Foodee.Orchestrator - INFO - Found 14 documents for user TrevorClient1 in results collection
2024-11-02 06:03:00,277 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-02 06:03:00,282 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 06:03:00,282 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 06:03:02,671 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:03:02,681 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 bag of mixed bell peppers', '1 bag of onions', '1 bunch of cilantro', '1 bag of mixed salad greens', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer cheese']}, {'category': 'Dairy', 'items': ['1 small tub of yogurt']}, {'category': 'Pantry Items', 'items': ['1 pack of quinoa', '1 can of chickpeas', '1 jar of tomato sauce', '1 bottle of vegetable oil']}, {'category': 'Spices', 'items': ['1 jar of garam masala', '1 jar of paprika', '1 jar of ground turmeric', '1 jar of cumin seeds']}]}
2024-11-02 06:03:02,708 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5G7HX9yNl6SbdhgDeRu43HyJJ69', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 bag of mixed bell peppers","1 bag of onions","1 bunch of cilantro","1 bag of mixed salad greens","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer cheese"]},{"category":"Dairy","items":["1 small tub of yogurt"]},{"category":"Pantry Items","items":["1 pack of quinoa","1 can of chickpeas","1 jar of tomato sauce","1 bottle of vegetable oil"]},{"category":"Spices","items":["1 jar of garam masala","1 jar of paprika","1 jar of ground turmeric","1 jar of cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 bag of mixed bell peppers', '1 bag of onions', '1 bunch of cilantro', '1 bag of mixed salad greens', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer cheese']), ShoppingListItem(category='Dairy', items=['1 small tub of yogurt']), ShoppingListItem(category='Pantry Items', items=['1 pack of quinoa', '1 can of chickpeas', '1 jar of tomato sauce', '1 bottle of vegetable oil']), ShoppingListItem(category='Spices', items=['1 jar of garam masala', '1 jar of paprika', '1 jar of ground turmeric', '1 jar of cumin seeds'])])))], created=1730541779, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=139, prompt_tokens=560, total_tokens=699, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:03:02,717 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:03:03,824 - Foodee.Orchestrator - INFO - Generated grocery list for session f42b2b23-bd2b-44ee-be2e-23d4a0505e68
2024-11-02 06:03:05,535 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:03:05,540 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '2 cucumbers', '1 bunch of cilantro', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 400g)']}, {'category': 'Pantry Items', 'items': ['1 can of chickpeas', '1 bag of brown rice (1kg)', '1 jar of tomato puree', '1 container of plain yogurt (about 500g)']}, {'category': 'Spices', 'items': ['1 jar of garam masala', '1 jar of cumin seeds', '1 jar of turmeric', '1 jar of coriander powder']}]}
2024-11-02 06:03:05,543 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5GAa8m7YR0CLYAphsA6OSp5SmF5', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","2 cucumbers","1 bunch of cilantro","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 400g)"]},{"category":"Pantry Items","items":["1 can of chickpeas","1 bag of brown rice (1kg)","1 jar of tomato puree","1 container of plain yogurt (about 500g)"]},{"category":"Spices","items":["1 jar of garam masala","1 jar of cumin seeds","1 jar of turmeric","1 jar of coriander powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '2 cucumbers', '1 bunch of cilantro', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 400g)']), ShoppingListItem(category='Pantry Items', items=['1 can of chickpeas', '1 bag of brown rice (1kg)', '1 jar of tomato puree', '1 container of plain yogurt (about 500g)']), ShoppingListItem(category='Spices', items=['1 jar of garam masala', '1 jar of cumin seeds', '1 jar of turmeric', '1 jar of coriander powder'])])))], created=1730541782, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=134, prompt_tokens=554, total_tokens=688, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:03:05,550 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:03:06,944 - Foodee.Orchestrator - INFO - Generated grocery list for session 53764652-b628-4ca5-93ce-aafe8df85b9d
2024-11-02 06:03:11,956 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 06:03:11,990 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:03:11,994 - perplexity_find_prices - INFO - Processing item 1/16: 1 cucumber
2024-11-02 06:03:23,522 - perplexity_find_prices - INFO - Processing item 2/16: 1 bag of mixed bell peppers
2024-11-02 06:03:30,243 - perplexity_find_prices - INFO - Processing item 3/16: 1 bag of onions
2024-11-02 06:03:36,722 - perplexity_find_prices - INFO - Processing item 4/16: 1 bunch of cilantro
2024-11-02 06:03:40,519 - perplexity_find_prices - INFO - Processing item 5/16: 1 bag of mixed salad greens
2024-11-02 06:03:47,810 - perplexity_find_prices - INFO - Processing item 6/16: 1 lemon
2024-11-02 06:03:55,296 - perplexity_find_prices - INFO - Processing item 7/16: 1 pack of paneer cheese
2024-11-02 06:04:00,302 - perplexity_find_prices - INFO - Processing item 8/16: 1 small tub of yogurt
2024-11-02 06:04:03,213 - perplexity_find_prices - INFO - Processing item 9/16: 1 pack of quinoa
2024-11-02 06:04:08,421 - perplexity_find_prices - INFO - Processing item 10/16: 1 can of chickpeas
2024-11-02 06:04:13,037 - perplexity_find_prices - INFO - Processing item 11/16: 1 jar of tomato sauce
2024-11-02 06:04:17,999 - perplexity_find_prices - INFO - Processing item 12/16: 1 bottle of vegetable oil
2024-11-02 06:04:37,199 - perplexity_find_prices - INFO - Processing item 13/16: 1 jar of garam masala
2024-11-02 06:04:41,557 - perplexity_find_prices - INFO - Processing item 14/16: 1 jar of paprika
2024-11-02 06:04:46,053 - perplexity_find_prices - INFO - Processing item 15/16: 1 jar of ground turmeric
2024-11-02 06:04:55,389 - perplexity_find_prices - INFO - Processing item 16/16: 1 jar of cumin seeds
2024-11-02 06:05:04,192 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:05:04,193 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session f42b2b23-bd2b-44ee-be2e-23d4a0505e68
2024-11-02 06:05:04,193 - Foodee.Orchestrator - INFO - Total price for shopping list: $91.90
2024-11-02 06:05:04,196 - perplexity_find_prices - INFO - Processing item 1/13: 1 bag of spinach (about 200g)
2024-11-02 06:05:12,289 - perplexity_find_prices - INFO - Processing item 2/13: 2 cucumbers
2024-11-02 06:05:18,385 - perplexity_find_prices - INFO - Processing item 3/13: 1 bunch of cilantro
2024-11-02 06:05:21,297 - perplexity_find_prices - INFO - Processing item 4/13: 1 lemon
2024-11-02 06:05:30,670 - perplexity_find_prices - INFO - Processing item 5/13: 1 pack of paneer (about 400g)
2024-11-02 06:05:38,913 - perplexity_find_prices - INFO - Processing item 6/13: 1 can of chickpeas
2024-11-02 06:05:46,445 - perplexity_find_prices - INFO - Processing item 7/13: 1 bag of brown rice (1kg)
2024-11-02 06:05:49,820 - perplexity_find_prices - INFO - Processing item 8/13: 1 jar of tomato puree
2024-11-02 06:05:58,582 - perplexity_find_prices - INFO - Processing item 9/13: 1 container of plain yogurt (about 500g)
2024-11-02 06:06:04,203 - perplexity_find_prices - INFO - Processing item 10/13: 1 jar of garam masala
2024-11-02 06:06:07,911 - perplexity_find_prices - INFO - Processing item 11/13: 1 jar of cumin seeds
2024-11-02 06:06:15,910 - perplexity_find_prices - INFO - Processing item 12/13: 1 jar of turmeric
2024-11-02 06:06:23,488 - perplexity_find_prices - INFO - Processing item 13/13: 1 jar of coriander powder
2024-11-02 06:06:28,011 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:06:28,011 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 53764652-b628-4ca5-93ce-aafe8df85b9d
2024-11-02 06:06:28,012 - Foodee.Orchestrator - INFO - Total price for shopping list: $32.69
2024-11-02 06:06:33,017 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-11-02 06:06:36,926 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:06:36,931 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-02 06:06:36,932 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1
2024-11-02 06:06:36,976 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-02 06:06:36,976 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-02 06:06:36,976 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-02 06:06:36,978 - Foodee.Orchestrator - ERROR - Error in recipe nutrition generation: No module named 'recipe_nutrition_service'
2024-11-02 06:06:36,978 - Foodee.Orchestrator - ERROR - Error in orchestration process: No module named 'recipe_nutrition_service'
2024-11-02 06:06:36,979 - Foodee.Orchestrator - ERROR - Fatal error in main: No module named 'recipe_nutrition_service'
2024-11-02 06:09:14,150 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:09:14,161 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5515
2024-11-02 06:09:14,162 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 06:09:14,162 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-02 06:09:17,746 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:09:17,787 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Spiced Yellow Lentil Dal', 'Cucumber and Tomato Raita'])
2024-11-02 06:09:17,790 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5MBLdz7t4DamwRAboJpnT77Rwil', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Quinoa Pilaf with Mixed Vegetables","Spiced Yellow Lentil Dal","Cucumber and Tomato Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Quinoa Pilaf with Mixed Vegetables', 'Spiced Yellow Lentil Dal', 'Cucumber and Tomato Raita']))))], created=1730542155, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=40, prompt_tokens=826, total_tokens=866, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:09:18,972 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:09:18,975 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Rice', sides=['Roasted Mung Bean and Quinoa Salad', 'Cucumber Raita'])
2024-11-02 06:09:18,978 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5MC7xpqrQUz5HVIhwH7lLJzW4gq', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala with Brown Rice","sides":["Roasted Mung Bean and Quinoa Salad","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Rice', sides=['Roasted Mung Bean and Quinoa Salad', 'Cucumber Raita']))))], created=1730542156, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=35, prompt_tokens=826, total_tokens=861, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:09:18,986 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 06:09:23,993 - Foodee.Orchestrator - INFO - Found 16 documents for user TrevorClient1 in results collection
2024-11-02 06:09:23,999 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-02 06:09:24,006 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 06:09:24,007 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 06:09:26,527 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:09:26,536 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 small bunch of cilantro', '1 lime', '1 pack cherry tomatoes', '1 bag of mixed salad greens']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 400g)']}, {'category': 'Dairy', 'items': ['1 container of plain yogurt (500g)']}, {'category': 'Pantry Items', 'items': ['1 bag of quinoa', '1 bag of brown rice', '1 bag of mung beans', '1 jar of tikka masala sauce']}, {'category': 'Spices', 'items': ['1 pack of garam masala', '1 small container of cumin seeds']}]}
2024-11-02 06:09:26,565 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5MJMAyJd7iuCLES6OjTuMmqL9Se', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 small bunch of cilantro","1 lime","1 pack cherry tomatoes","1 bag of mixed salad greens"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 400g)"]},{"category":"Dairy","items":["1 container of plain yogurt (500g)"]},{"category":"Pantry Items","items":["1 bag of quinoa","1 bag of brown rice","1 bag of mung beans","1 jar of tikka masala sauce"]},{"category":"Spices","items":["1 pack of garam masala","1 small container of cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 small bunch of cilantro', '1 lime', '1 pack cherry tomatoes', '1 bag of mixed salad greens']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 400g)']), ShoppingListItem(category='Dairy', items=['1 container of plain yogurt (500g)']), ShoppingListItem(category='Pantry Items', items=['1 bag of quinoa', '1 bag of brown rice', '1 bag of mung beans', '1 jar of tikka masala sauce']), ShoppingListItem(category='Spices', items=['1 pack of garam masala', '1 small container of cumin seeds'])])))], created=1730542163, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=135, prompt_tokens=561, total_tokens=696, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:09:26,575 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:09:28,095 - Foodee.Orchestrator - INFO - Generated grocery list for session a4187a1a-112a-4c30-b04f-b852dc74ef3e
2024-11-02 06:09:30,306 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:09:30,312 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '2 medium tomatoes', '1 bunch of cilantro', '1 medium onion', '1 medium bell pepper', '1 small piece of ginger', '1 bulb of garlic', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (400-500g)']}, {'category': 'Grains', 'items': ['1 pack of quinoa (about 1 lb)', '1 pack of lentils (yellow, about 1 lb)']}, {'category': 'Dairy', 'items': ['1 small container of yogurt (about 500g)']}, {'category': 'Spices', 'items': ['Garam masala', 'Turmeric powder', 'Cumin seeds', 'Coriander powder', 'Chili powder', 'Mustard seeds']}, {'category': 'Pantry Items', 'items': ['1 can of coconut milk']}]}
2024-11-02 06:09:30,316 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5MMqb6dtwW9xOwvBObcHzqdGwyN', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","2 medium tomatoes","1 bunch of cilantro","1 medium onion","1 medium bell pepper","1 small piece of ginger","1 bulb of garlic","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer (400-500g)"]},{"category":"Grains","items":["1 pack of quinoa (about 1 lb)","1 pack of lentils (yellow, about 1 lb)"]},{"category":"Dairy","items":["1 small container of yogurt (about 500g)"]},{"category":"Spices","items":["Garam masala","Turmeric powder","Cumin seeds","Coriander powder","Chili powder","Mustard seeds"]},{"category":"Pantry Items","items":["1 can of coconut milk"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '2 medium tomatoes', '1 bunch of cilantro', '1 medium onion', '1 medium bell pepper', '1 small piece of ginger', '1 bulb of garlic', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (400-500g)']), ShoppingListItem(category='Grains', items=['1 pack of quinoa (about 1 lb)', '1 pack of lentils (yellow, about 1 lb)']), ShoppingListItem(category='Dairy', items=['1 small container of yogurt (about 500g)']), ShoppingListItem(category='Spices', items=['Garam masala', 'Turmeric powder', 'Cumin seeds', 'Coriander powder', 'Chili powder', 'Mustard seeds']), ShoppingListItem(category='Pantry Items', items=['1 can of coconut milk'])])))], created=1730542166, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=172, prompt_tokens=568, total_tokens=740, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:09:30,326 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:09:31,813 - Foodee.Orchestrator - INFO - Generated grocery list for session 648e2339-1979-4187-b0e1-7a1406667251
2024-11-02 06:09:36,816 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 06:09:36,845 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:09:36,849 - perplexity_find_prices - INFO - Processing item 1/13: 1 cucumber
2024-11-02 06:09:46,591 - perplexity_find_prices - INFO - Processing item 2/13: 1 small bunch of cilantro
2024-11-02 06:09:49,080 - perplexity_find_prices - INFO - Processing item 3/13: 1 lime
2024-11-02 06:09:51,900 - perplexity_find_prices - INFO - Processing item 4/13: 1 pack cherry tomatoes
2024-11-02 06:09:59,630 - perplexity_find_prices - INFO - Processing item 5/13: 1 bag of mixed salad greens
2024-11-02 06:10:07,098 - perplexity_find_prices - INFO - Processing item 6/13: 1 pack of paneer (about 400g)
2024-11-02 06:10:18,940 - perplexity_find_prices - INFO - Processing item 7/13: 1 container of plain yogurt (500g)
2024-11-02 06:10:23,971 - perplexity_find_prices - INFO - Processing item 8/13: 1 bag of quinoa
2024-11-02 06:10:30,315 - perplexity_find_prices - INFO - Processing item 9/13: 1 bag of brown rice
2024-11-02 06:10:39,273 - perplexity_find_prices - INFO - Processing item 10/13: 1 bag of mung beans
2024-11-02 06:10:43,779 - perplexity_find_prices - INFO - Processing item 11/13: 1 jar of tikka masala sauce
2024-11-02 06:10:51,585 - perplexity_find_prices - INFO - Processing item 12/13: 1 pack of garam masala
2024-11-02 06:10:56,717 - perplexity_find_prices - INFO - Processing item 13/13: 1 small container of cumin seeds
2024-11-02 06:11:02,382 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:11:02,383 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session a4187a1a-112a-4c30-b04f-b852dc74ef3e
2024-11-02 06:11:02,383 - Foodee.Orchestrator - INFO - Total price for shopping list: $30.13
2024-11-02 06:11:02,387 - perplexity_find_prices - INFO - Processing item 1/19: 1 cucumber
2024-11-02 06:11:08,934 - perplexity_find_prices - INFO - Processing item 2/19: 2 medium tomatoes
2024-11-02 06:11:14,010 - perplexity_find_prices - INFO - Processing item 3/19: 1 bunch of cilantro
2024-11-02 06:11:16,555 - perplexity_find_prices - INFO - Processing item 4/19: 1 medium onion
2024-11-02 06:11:27,857 - perplexity_find_prices - INFO - Processing item 5/19: 1 medium bell pepper
2024-11-02 06:11:31,402 - perplexity_find_prices - INFO - Processing item 6/19: 1 small piece of ginger
2024-11-02 06:11:38,219 - perplexity_find_prices - INFO - Processing item 7/19: 1 bulb of garlic
2024-11-02 06:11:46,130 - perplexity_find_prices - INFO - Processing item 8/19: 1 lemon
2024-11-02 06:11:59,403 - perplexity_find_prices - INFO - Processing item 9/19: 1 pack of paneer (400-500g)
2024-11-02 06:12:05,167 - perplexity_find_prices - INFO - Processing item 10/19: 1 pack of quinoa (about 1 lb)
2024-11-02 06:12:11,134 - perplexity_find_prices - INFO - Processing item 11/19: 1 pack of lentils (yellow, about 1 lb)
2024-11-02 06:12:15,787 - perplexity_find_prices - INFO - Processing item 12/19: 1 small container of yogurt (about 500g)
2024-11-02 06:12:24,632 - perplexity_find_prices - INFO - Processing item 13/19: Garam masala
2024-11-02 06:12:30,430 - perplexity_find_prices - INFO - Processing item 14/19: Turmeric powder
2024-11-02 06:12:34,842 - perplexity_find_prices - INFO - Processing item 15/19: Cumin seeds
2024-11-02 06:12:38,906 - perplexity_find_prices - INFO - Processing item 16/19: Coriander powder
2024-11-02 06:12:44,512 - perplexity_find_prices - INFO - Processing item 17/19: Chili powder
2024-11-02 06:12:49,776 - perplexity_find_prices - INFO - Processing item 18/19: Mustard seeds
2024-11-02 06:12:55,225 - perplexity_find_prices - INFO - Processing item 19/19: 1 can of coconut milk
2024-11-02 06:13:01,602 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:13:01,603 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 648e2339-1979-4187-b0e1-7a1406667251
2024-11-02 06:13:01,603 - Foodee.Orchestrator - INFO - Total price for shopping list: $41.55
2024-11-02 06:13:06,611 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-11-02 06:13:13,614 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:13:13,619 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-02 06:13:13,619 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1
2024-11-02 06:13:13,659 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-02 06:13:13,660 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-02 06:13:13,660 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-02 06:13:13,694 - recipe_nutrition - ERROR - No meal plans found for user: TrevorClient1
2024-11-02 06:13:13,694 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session a4187a1a-112a-4c30-b04f-b852dc74ef3e
2024-11-02 06:13:13,696 - recipe_nutrition - ERROR - No meal plans found for user: TrevorClient1
2024-11-02 06:13:13,696 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 648e2339-1979-4187-b0e1-7a1406667251
2024-11-02 06:13:18,701 - Foodee.Orchestrator - INFO - Reading nutrition information for user TrevorClient1
2024-11-02 06:13:18,704 - Foodee.Orchestrator - WARNING - No nutrition information found for user TrevorClient1
2024-11-02 06:13:18,704 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-11-02 06:24:02,901 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:24:02,913 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5517
2024-11-02 06:24:02,916 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 06:24:02,916 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-02 06:24:06,946 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:24:06,978 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Rice', sides=['Mixed Lentil Dal', 'Cucumber Mint Raita', 'Whole Wheat Roti'])
2024-11-02 06:24:06,981 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5aWpaHnvBgHanduUTQ1a0tAoajo', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala with Brown Rice","sides":["Mixed Lentil Dal","Cucumber Mint Raita","Whole Wheat Roti"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Rice', sides=['Mixed Lentil Dal', 'Cucumber Mint Raita', 'Whole Wheat Roti']))))], created=1730543044, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=36, prompt_tokens=826, total_tokens=862, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:24:08,269 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:24:08,272 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Basmati Rice', sides=['Cucumber and Mint Raita', 'Mixed Vegetable Sabzi', 'Whole Wheat Chapati'])
2024-11-02 06:24:08,276 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP5aYTZEvp8Rn8XQY6n1njAMg9AXt', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala with Brown Basmati Rice","sides":["Cucumber and Mint Raita","Mixed Vegetable Sabzi","Whole Wheat Chapati"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala with Brown Basmati Rice', sides=['Cucumber and Mint Raita', 'Mixed Vegetable Sabzi', 'Whole Wheat Chapati']))))], created=1730543046, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=40, prompt_tokens=826, total_tokens=866, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:24:08,286 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 06:24:13,300 - Foodee.Orchestrator - INFO - Found 18 documents for user TrevorClient1 in results collection
2024-11-02 06:24:13,306 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-02 06:24:13,312 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 06:24:13,312 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 06:24:16,339 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:24:16,349 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['Cucumbers (2 large)', 'Fresh Mint (1 small bunch)', 'Mixed Vegetables (1 bag, like bell peppers, carrots, and peas)']}, {'category': 'Meat/Protein', 'items': ['Paneer (1 pack, about 400g)']}, {'category': 'Dairy', 'items': ['Yogurt (1 tub, about 500g)']}, {'category': 'Pantry Items', 'items': ['Brown Basmati Rice (1 bag, about 1kg)', 'Whole Wheat Flour (1 bag, about 1kg)']}, {'category': 'Spices', 'items': ['Garam Masala (1 small jar)', 'Turmeric Powder (1 small jar)', 'Cumin Seeds (1 small jar)']}]}
2024-11-02 06:24:16,356 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5aejwfihpPsNYCmQxxKDWI6bsPv', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["Cucumbers (2 large)","Fresh Mint (1 small bunch)","Mixed Vegetables (1 bag, like bell peppers, carrots, and peas)"]},{"category":"Meat/Protein","items":["Paneer (1 pack, about 400g)"]},{"category":"Dairy","items":["Yogurt (1 tub, about 500g)"]},{"category":"Pantry Items","items":["Brown Basmati Rice (1 bag, about 1kg)","Whole Wheat Flour (1 bag, about 1kg)"]},{"category":"Spices","items":["Garam Masala (1 small jar)","Turmeric Powder (1 small jar)","Cumin Seeds (1 small jar)"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['Cucumbers (2 large)', 'Fresh Mint (1 small bunch)', 'Mixed Vegetables (1 bag, like bell peppers, carrots, and peas)']), ShoppingListItem(category='Meat/Protein', items=['Paneer (1 pack, about 400g)']), ShoppingListItem(category='Dairy', items=['Yogurt (1 tub, about 500g)']), ShoppingListItem(category='Pantry Items', items=['Brown Basmati Rice (1 bag, about 1kg)', 'Whole Wheat Flour (1 bag, about 1kg)']), ShoppingListItem(category='Spices', items=['Garam Masala (1 small jar)', 'Turmeric Powder (1 small jar)', 'Cumin Seeds (1 small jar)'])])))], created=1730543052, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=162, prompt_tokens=568, total_tokens=730, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:24:16,365 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:24:17,796 - Foodee.Orchestrator - INFO - Generated grocery list for session 58c29279-8b12-418b-b848-2df0b5208527
2024-11-02 06:24:19,834 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:24:19,840 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 bunch of mint']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 400g)']}, {'category': 'Dairy', 'items': ['1 small tub of plain yogurt']}, {'category': 'Grains/Bakery', 'items': ['1 bag of brown rice', '1 pack of whole wheat roti']}, {'category': 'Pantry Items', 'items': ['1 pack of mixed lentils']}, {'category': 'Spices', 'items': ['Spice selection for tikka masala (if not already in stock)']}]}
2024-11-02 06:24:19,844 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP5ai56ZA9uYI5ZmZ4zPyJiutbZ6b', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 bunch of mint"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 400g)"]},{"category":"Dairy","items":["1 small tub of plain yogurt"]},{"category":"Grains/Bakery","items":["1 bag of brown rice","1 pack of whole wheat roti"]},{"category":"Pantry Items","items":["1 pack of mixed lentils"]},{"category":"Spices","items":["Spice selection for tikka masala (if not already in stock)"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 bunch of mint']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 400g)']), ShoppingListItem(category='Dairy', items=['1 small tub of plain yogurt']), ShoppingListItem(category='Grains/Bakery', items=['1 bag of brown rice', '1 pack of whole wheat roti']), ShoppingListItem(category='Pantry Items', items=['1 pack of mixed lentils']), ShoppingListItem(category='Spices', items=['Spice selection for tikka masala (if not already in stock)'])])))], created=1730543056, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=123, prompt_tokens=564, total_tokens=687, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:24:19,852 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:24:21,012 - Foodee.Orchestrator - INFO - Generated grocery list for session aa2fecfb-8085-46df-b274-23cee79431ab
2024-11-02 06:24:26,023 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 06:24:26,055 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:24:26,059 - perplexity_find_prices - INFO - Processing item 1/10: Cucumbers (2 large)
2024-11-02 06:24:32,203 - perplexity_find_prices - INFO - Processing item 2/10: Fresh Mint (1 small bunch)
2024-11-02 06:24:36,067 - perplexity_find_prices - INFO - Processing item 3/10: Mixed Vegetables (1 bag, like bell peppers, carrots, and peas)
2024-11-02 06:24:41,517 - perplexity_find_prices - INFO - Processing item 4/10: Paneer (1 pack, about 400g)
2024-11-02 06:24:46,231 - perplexity_find_prices - INFO - Processing item 5/10: Yogurt (1 tub, about 500g)
2024-11-02 06:24:51,894 - perplexity_find_prices - INFO - Processing item 6/10: Brown Basmati Rice (1 bag, about 1kg)
2024-11-02 06:25:00,389 - perplexity_find_prices - INFO - Processing item 7/10: Whole Wheat Flour (1 bag, about 1kg)
2024-11-02 06:25:07,762 - perplexity_find_prices - INFO - Processing item 8/10: Garam Masala (1 small jar)
2024-11-02 06:25:11,843 - perplexity_find_prices - INFO - Processing item 9/10: Turmeric Powder (1 small jar)
2024-11-02 06:25:20,194 - perplexity_find_prices - INFO - Processing item 10/10: Cumin Seeds (1 small jar)
2024-11-02 06:25:28,331 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:25:28,331 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 58c29279-8b12-418b-b848-2df0b5208527
2024-11-02 06:25:28,332 - Foodee.Orchestrator - INFO - Total price for shopping list: $35.92
2024-11-02 06:25:28,334 - perplexity_find_prices - INFO - Processing item 1/8: 1 cucumber
2024-11-02 06:25:35,889 - perplexity_find_prices - INFO - Processing item 2/8: 1 bunch of mint
2024-11-02 06:25:41,893 - perplexity_find_prices - INFO - Processing item 3/8: 1 pack of paneer (about 400g)
2024-11-02 06:25:47,704 - perplexity_find_prices - INFO - Processing item 4/8: 1 small tub of plain yogurt
2024-11-02 06:25:51,386 - perplexity_find_prices - INFO - Processing item 5/8: 1 bag of brown rice
2024-11-02 06:25:58,675 - perplexity_find_prices - INFO - Processing item 6/8: 1 pack of whole wheat roti
2024-11-02 06:26:05,913 - perplexity_find_prices - INFO - Processing item 7/8: 1 pack of mixed lentils
2024-11-02 06:26:10,187 - perplexity_find_prices - WARNING - Could not extract price from response for item: 1 pack of mixed lentils
2024-11-02 06:26:19,378 - perplexity_find_prices - INFO - Processing item 8/8: Spice selection for tikka masala (if not already in stock)
2024-11-02 06:26:27,112 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:26:27,113 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session aa2fecfb-8085-46df-b274-23cee79431ab
2024-11-02 06:26:27,113 - Foodee.Orchestrator - INFO - Total price for shopping list: $67.66
2024-11-02 06:26:32,125 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1
2024-11-02 06:26:35,933 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:26:35,938 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-02 06:26:35,938 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1
2024-11-02 06:26:35,999 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-02 06:26:36,000 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-02 06:26:36,000 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-02 06:26:36,002 - Foodee.Orchestrator - ERROR - Error in recipe nutrition generation: No module named 'recipe_nutrition_service'
2024-11-02 06:26:36,002 - Foodee.Orchestrator - ERROR - Error in orchestration process: No module named 'recipe_nutrition_service'
2024-11-02 06:26:36,003 - Foodee.Orchestrator - ERROR - Fatal error in main: No module named 'recipe_nutrition_service'
2024-11-02 06:54:14,580 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:54:14,615 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5519
2024-11-02 06:54:14,618 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 06:54:14,618 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-02 06:54:18,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:54:18,964 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Jeera Rice', 'Cucumber Raita', 'Freshly Made Roti'])
2024-11-02 06:54:18,967 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP63kiNLFR0S0IcnVF3pMQ1dCrdq8', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Jeera Rice","Cucumber Raita","Freshly Made Roti"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Jeera Rice', 'Cucumber Raita', 'Freshly Made Roti']))))], created=1730544856, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=32, prompt_tokens=1182, total_tokens=1214, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:54:20,125 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:54:20,128 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pulao', 'Cucumber Mint Raita', 'Mixed Vegetable Sabzi'])
2024-11-02 06:54:20,132 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP63meGgWfDDVjluUUdvAx7rhAhnG', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Brown Rice Pulao","Cucumber Mint Raita","Mixed Vegetable Sabzi"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pulao', 'Cucumber Mint Raita', 'Mixed Vegetable Sabzi']))))], created=1730544858, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=34, prompt_tokens=1182, total_tokens=1216, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:54:20,141 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 06:54:38,679 - Foodee.Orchestrator - INFO - Found 20 documents for user TrevorClient1 in results collection
2024-11-02 06:54:38,686 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-11-02 06:54:38,693 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 06:54:38,693 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 06:54:42,014 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:54:42,024 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 large cucumber', '1 bunch fresh mint', '1 medium onion', '1 bell pepper', '1 small cauliflower', '1 carrot', '1 bag spinach (about 200g)', '3 tomatoes', '2 green chilies', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack paneer (about 400g)']}, {'category': 'Dairy', 'items': ['1 tub plain yogurt (500g)', '1 small pack cream (about 250ml)']}, {'category': 'Pantry Items', 'items': ['1 bag brown rice (1kg)', '1 pack basmati rice (1kg)']}, {'category': 'Spices', 'items': ['1 jar garam masala', '1 jar turmeric powder', '1 jar cumin seeds', '1 jar coriander powder', '1 jar red chili powder']}, {'category': 'Others', 'items': ['1 bottle tomato paste']}]}
2024-11-02 06:54:42,031 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP645kLkFqG3GP9IaDxEhkIandkaZ', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 large cucumber","1 bunch fresh mint","1 medium onion","1 bell pepper","1 small cauliflower","1 carrot","1 bag spinach (about 200g)","3 tomatoes","2 green chilies","1 lemon"]},{"category":"Meat/Protein","items":["1 pack paneer (about 400g)"]},{"category":"Dairy","items":["1 tub plain yogurt (500g)","1 small pack cream (about 250ml)"]},{"category":"Pantry Items","items":["1 bag brown rice (1kg)","1 pack basmati rice (1kg)"]},{"category":"Spices","items":["1 jar garam masala","1 jar turmeric powder","1 jar cumin seeds","1 jar coriander powder","1 jar red chili powder"]},{"category":"Others","items":["1 bottle tomato paste"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 large cucumber', '1 bunch fresh mint', '1 medium onion', '1 bell pepper', '1 small cauliflower', '1 carrot', '1 bag spinach (about 200g)', '3 tomatoes', '2 green chilies', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack paneer (about 400g)']), ShoppingListItem(category='Dairy', items=['1 tub plain yogurt (500g)', '1 small pack cream (about 250ml)']), ShoppingListItem(category='Pantry Items', items=['1 bag brown rice (1kg)', '1 pack basmati rice (1kg)']), ShoppingListItem(category='Spices', items=['1 jar garam masala', '1 jar turmeric powder', '1 jar cumin seeds', '1 jar coriander powder', '1 jar red chili powder']), ShoppingListItem(category='Others', items=['1 bottle tomato paste'])])))], created=1730544877, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=183, prompt_tokens=562, total_tokens=745, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:54:42,039 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:54:43,523 - Foodee.Orchestrator - INFO - Generated grocery list for session 4ffb97ee-beb3-4729-946c-4a53f2597219
2024-11-02 06:54:48,529 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 06:54:48,559 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:54:48,563 - perplexity_find_prices - INFO - Processing item 1/21: 1 large cucumber
2024-11-02 06:54:55,007 - perplexity_find_prices - INFO - Processing item 2/21: 1 bunch fresh mint
2024-11-02 06:54:58,992 - perplexity_find_prices - INFO - Processing item 3/21: 1 medium onion
2024-11-02 06:55:07,206 - perplexity_find_prices - INFO - Processing item 4/21: 1 bell pepper
2024-11-02 06:55:13,961 - perplexity_find_prices - INFO - Processing item 5/21: 1 small cauliflower
2024-11-02 06:55:17,992 - perplexity_find_prices - INFO - Processing item 6/21: 1 carrot
2024-11-02 06:55:25,370 - perplexity_find_prices - INFO - Processing item 7/21: 1 bag spinach (about 200g)
2024-11-02 06:55:31,014 - perplexity_find_prices - INFO - Processing item 8/21: 3 tomatoes
2024-11-02 06:55:36,091 - perplexity_find_prices - INFO - Processing item 9/21: 2 green chilies
2024-11-02 06:55:43,114 - perplexity_find_prices - INFO - Processing item 10/21: 1 lemon
2024-11-02 06:55:48,526 - perplexity_find_prices - INFO - Processing item 11/21: 1 pack paneer (about 400g)
2024-11-02 06:55:52,417 - perplexity_find_prices - INFO - Processing item 12/21: 1 tub plain yogurt (500g)
2024-11-02 06:55:56,896 - perplexity_find_prices - INFO - Processing item 13/21: 1 small pack cream (about 250ml)
2024-11-02 06:56:01,088 - perplexity_find_prices - INFO - Processing item 14/21: 1 bag brown rice (1kg)
2024-11-02 06:56:06,281 - perplexity_find_prices - INFO - Processing item 15/21: 1 pack basmati rice (1kg)
2024-11-02 06:56:11,774 - perplexity_find_prices - INFO - Processing item 16/21: 1 jar garam masala
2024-11-02 06:56:21,438 - perplexity_find_prices - INFO - Processing item 17/21: 1 jar turmeric powder
2024-11-02 06:56:27,652 - perplexity_find_prices - INFO - Processing item 18/21: 1 jar cumin seeds
2024-11-02 06:56:32,061 - perplexity_find_prices - INFO - Processing item 19/21: 1 jar coriander powder
2024-11-02 06:56:37,726 - perplexity_find_prices - INFO - Processing item 20/21: 1 jar red chili powder
2024-11-02 06:56:42,016 - perplexity_find_prices - INFO - Processing item 21/21: 1 bottle tomato paste
2024-11-02 06:56:46,296 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 06:56:46,296 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 4ffb97ee-beb3-4729-946c-4a53f2597219
2024-11-02 06:56:46,296 - Foodee.Orchestrator - INFO - Total price for shopping list: $72.47
2024-11-02 06:56:51,303 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['4ffb97ee-beb3-4729-946c-4a53f2597219']
2024-11-02 06:56:51,322 - Foodee.Orchestrator - ERROR - Error in message formatting: object int can't be used in 'await' expression
2024-11-02 06:56:51,323 - Foodee.Orchestrator - ERROR - Error in orchestration process: object int can't be used in 'await' expression
2024-11-02 06:56:51,323 - Foodee.Orchestrator - ERROR - Fatal error in main: object int can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 581, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 504, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 407, in run_message_formatting
    doc_count = await self.results_collection.count_documents({
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object int can't be used in 'await' expression
2024-11-02 06:56:51,329 - Foodee.Orchestrator - ERROR - Error in main process: object int can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 606, in <module>
    loop.run_until_complete(main())
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 581, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 504, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 407, in run_message_formatting
    doc_count = await self.results_collection.count_documents({
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object int can't be used in 'await' expression
2024-11-02 06:58:41,546 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:58:41,570 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5521
2024-11-02 06:58:41,572 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 06:58:41,573 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-02 06:58:45,447 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:58:45,487 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pilaf', 'Cucumber and Tomato Kachumber Salad', 'Raita with Mint and Cumin'])
2024-11-02 06:58:45,491 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP683pRi7ftWvUsXjejGFXdsdEOaT', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Tikka Masala","sides":["Brown Rice Pilaf","Cucumber and Tomato Kachumber Salad","Raita with Mint and Cumin"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Tikka Masala', sides=['Brown Rice Pilaf', 'Cucumber and Tomato Kachumber Salad', 'Raita with Mint and Cumin']))))], created=1730545123, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=39, prompt_tokens=1182, total_tokens=1221, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:58:46,714 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:58:46,717 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Quinoa Pulao', 'Cucumber Raita', 'Masala Chana'])
2024-11-02 06:58:46,720 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP684BrD1ga5hRpSnKV1D0jkh5xLy', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Quinoa Pulao","Cucumber Raita","Masala Chana"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Quinoa Pulao', 'Cucumber Raita', 'Masala Chana']))))], created=1730545124, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=31, prompt_tokens=1182, total_tokens=1213, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:58:46,728 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 06:58:51,744 - Foodee.Orchestrator - INFO - Found 22 documents for user TrevorClient1 in results collection
2024-11-02 06:58:51,751 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-02 06:58:51,758 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 06:58:51,758 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 06:58:54,889 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:58:54,899 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '1 cucumber', '1 lemon', '1 bunch of cilantro']}, {'category': 'Meat/Protein', 'items': ['250g pack of paneer', '1 can of chickpeas']}, {'category': 'Dairy', 'items': ['500g tub of plain yogurt']}, {'category': 'Pantry Items', 'items': ['1 small package of quinoa', '1 bag of basmati rice', '1 small bottle of vegetable oil', '1 pack of ground turmeric', '1 pack of ground cumin', '1 pack of ground coriander', '1 pack of garam masala', '1 pack of cumin seeds', '1 pack of mustard seeds', '1 small bag of granulated sugar']}, {'category': 'Spices', 'items': ['1 pack of red chili powder', '1 pack of ginger paste', '1 pack of garlic paste', '1 pack of salt']}]}
2024-11-02 06:58:54,932 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP68A4DaWJYxBtXQulFdEx68lFKrW', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","1 cucumber","1 lemon","1 bunch of cilantro"]},{"category":"Meat/Protein","items":["250g pack of paneer","1 can of chickpeas"]},{"category":"Dairy","items":["500g tub of plain yogurt"]},{"category":"Pantry Items","items":["1 small package of quinoa","1 bag of basmati rice","1 small bottle of vegetable oil","1 pack of ground turmeric","1 pack of ground cumin","1 pack of ground coriander","1 pack of garam masala","1 pack of cumin seeds","1 pack of mustard seeds","1 small bag of granulated sugar"]},{"category":"Spices","items":["1 pack of red chili powder","1 pack of ginger paste","1 pack of garlic paste","1 pack of salt"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '1 cucumber', '1 lemon', '1 bunch of cilantro']), ShoppingListItem(category='Meat/Protein', items=['250g pack of paneer', '1 can of chickpeas']), ShoppingListItem(category='Dairy', items=['500g tub of plain yogurt']), ShoppingListItem(category='Pantry Items', items=['1 small package of quinoa', '1 bag of basmati rice', '1 small bottle of vegetable oil', '1 pack of ground turmeric', '1 pack of ground cumin', '1 pack of ground coriander', '1 pack of garam masala', '1 pack of cumin seeds', '1 pack of mustard seeds', '1 small bag of granulated sugar']), ShoppingListItem(category='Spices', items=['1 pack of red chili powder', '1 pack of ginger paste', '1 pack of garlic paste', '1 pack of salt'])])))], created=1730545130, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=180, prompt_tokens=559, total_tokens=739, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:58:54,941 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:58:56,136 - Foodee.Orchestrator - INFO - Generated grocery list for session 0475d03e-1cdc-49c8-af40-b2fb45fa32fb
2024-11-02 06:58:57,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 06:58:57,813 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '2 tomatoes', '1 bunch of mint', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 400g)']}, {'category': 'Dairy', 'items': ['1 small tub of plain yogurt']}, {'category': 'Pantry Items', 'items': ['1 bag of brown rice', '1 jar of tikka masala sauce', '1 pack of basmati rice']}, {'category': 'Spices', 'items': ['Small bag of cumin seeds']}]}
2024-11-02 06:58:57,817 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP68E97Jc7gzd01Iv6xpgmqeOIAga', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","2 tomatoes","1 bunch of mint","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 400g)"]},{"category":"Dairy","items":["1 small tub of plain yogurt"]},{"category":"Pantry Items","items":["1 bag of brown rice","1 jar of tikka masala sauce","1 pack of basmati rice"]},{"category":"Spices","items":["Small bag of cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '2 tomatoes', '1 bunch of mint', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 400g)']), ShoppingListItem(category='Dairy', items=['1 small tub of plain yogurt']), ShoppingListItem(category='Pantry Items', items=['1 bag of brown rice', '1 jar of tikka masala sauce', '1 pack of basmati rice']), ShoppingListItem(category='Spices', items=['Small bag of cumin seeds'])])))], created=1730545134, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=109, prompt_tokens=567, total_tokens=676, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 06:58:57,826 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 06:58:59,055 - Foodee.Orchestrator - INFO - Generated grocery list for session c61c9b15-6054-481f-9808-600f72afb1fc
2024-11-02 06:59:04,064 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 06:59:04,095 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 06:59:04,099 - perplexity_find_prices - INFO - Processing item 1/21: 1 bag of spinach (about 200g)
2024-11-02 06:59:09,903 - perplexity_find_prices - INFO - Processing item 2/21: 1 cucumber
2024-11-02 06:59:15,390 - perplexity_find_prices - INFO - Processing item 3/21: 1 lemon
2024-11-02 06:59:19,331 - perplexity_find_prices - INFO - Processing item 4/21: 1 bunch of cilantro
2024-11-02 06:59:23,063 - perplexity_find_prices - INFO - Processing item 5/21: 250g pack of paneer
2024-11-02 06:59:27,983 - perplexity_find_prices - INFO - Processing item 6/21: 1 can of chickpeas
2024-11-02 06:59:32,622 - perplexity_find_prices - INFO - Processing item 7/21: 500g tub of plain yogurt
2024-11-02 06:59:42,571 - perplexity_find_prices - INFO - Processing item 8/21: 1 small package of quinoa
2024-11-02 06:59:48,087 - perplexity_find_prices - INFO - Processing item 9/21: 1 bag of basmati rice
2024-11-02 06:59:55,626 - perplexity_find_prices - INFO - Processing item 10/21: 1 small bottle of vegetable oil
2024-11-02 07:00:02,292 - perplexity_find_prices - INFO - Processing item 11/21: 1 pack of ground turmeric
2024-11-02 07:00:10,433 - perplexity_find_prices - INFO - Processing item 12/21: 1 pack of ground cumin
2024-11-02 07:00:14,776 - perplexity_find_prices - INFO - Processing item 13/21: 1 pack of ground coriander
2024-11-02 07:00:19,640 - perplexity_find_prices - INFO - Processing item 14/21: 1 pack of garam masala
2024-11-02 07:00:24,064 - perplexity_find_prices - INFO - Processing item 15/21: 1 pack of cumin seeds
2024-11-02 07:00:29,918 - perplexity_find_prices - INFO - Processing item 16/21: 1 pack of mustard seeds
2024-11-02 07:00:36,784 - perplexity_find_prices - INFO - Processing item 17/21: 1 small bag of granulated sugar
2024-11-02 07:00:41,485 - perplexity_find_prices - INFO - Processing item 18/21: 1 pack of red chili powder
2024-11-02 07:00:45,454 - perplexity_find_prices - INFO - Processing item 19/21: 1 pack of ginger paste
2024-11-02 07:00:49,155 - perplexity_find_prices - INFO - Processing item 20/21: 1 pack of garlic paste
2024-11-02 07:00:53,531 - perplexity_find_prices - INFO - Processing item 21/21: 1 pack of salt
2024-11-02 07:00:58,634 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:00:58,635 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 0475d03e-1cdc-49c8-af40-b2fb45fa32fb
2024-11-02 07:00:58,635 - Foodee.Orchestrator - INFO - Total price for shopping list: $115.91
2024-11-02 07:00:58,638 - perplexity_find_prices - INFO - Processing item 1/10: 1 cucumber
2024-11-02 07:01:06,512 - perplexity_find_prices - INFO - Processing item 2/10: 2 tomatoes
2024-11-02 07:01:11,898 - perplexity_find_prices - INFO - Processing item 3/10: 1 bunch of mint
2024-11-02 07:01:17,248 - perplexity_find_prices - INFO - Processing item 4/10: 1 lemon
2024-11-02 07:01:22,241 - perplexity_find_prices - INFO - Processing item 5/10: 1 pack of paneer (about 400g)
2024-11-02 07:01:28,462 - perplexity_find_prices - INFO - Processing item 6/10: 1 small tub of plain yogurt
2024-11-02 07:01:31,019 - perplexity_find_prices - INFO - Processing item 7/10: 1 bag of brown rice
2024-11-02 07:01:38,143 - perplexity_find_prices - INFO - Processing item 8/10: 1 jar of tikka masala sauce
2024-11-02 07:01:46,537 - perplexity_find_prices - INFO - Processing item 9/10: 1 pack of basmati rice
2024-11-02 07:01:54,140 - perplexity_find_prices - INFO - Processing item 10/10: Small bag of cumin seeds
2024-11-02 07:02:01,024 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:02:01,025 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session c61c9b15-6054-481f-9808-600f72afb1fc
2024-11-02 07:02:01,025 - Foodee.Orchestrator - INFO - Total price for shopping list: $45.89
2024-11-02 07:02:06,026 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['0475d03e-1cdc-49c8-af40-b2fb45fa32fb', 'c61c9b15-6054-481f-9808-600f72afb1fc']
2024-11-02 07:02:06,050 - Foodee.Orchestrator - ERROR - Error in message formatting: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-11-02 07:02:06,051 - Foodee.Orchestrator - ERROR - Error in orchestration process: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-11-02 07:02:06,051 - Foodee.Orchestrator - ERROR - Fatal error in main: process_user_documents() missing 1 required positional argument: 'session_ids'
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 565, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 430, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 479, in run_message_formatting
    process_user_documents(username)
TypeError: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-11-02 07:02:06,054 - Foodee.Orchestrator - ERROR - Error in main process: process_user_documents() missing 1 required positional argument: 'session_ids'
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 590, in <module>
    loop.run_until_complete(main())
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 565, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 430, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 479, in run_message_formatting
    process_user_documents(username)
TypeError: process_user_documents() missing 1 required positional argument: 'session_ids'
2024-11-02 07:06:11,305 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:06:11,336 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5523
2024-11-02 07:06:11,339 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 07:06:11,339 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-11-02 07:06:14,685 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:06:14,726 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Chana Masala', 'Brown Basmati Rice', 'Cucumber Raita'])
2024-11-02 07:06:14,730 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP6FIeRFE6TUISiojy6rF6Re6RpYz', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Chana Masala","Brown Basmati Rice","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Chana Masala', 'Brown Basmati Rice', 'Cucumber Raita']))))], created=1730545572, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=31, prompt_tokens=1182, total_tokens=1213, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:06:14,739 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 07:06:19,752 - Foodee.Orchestrator - INFO - Found 23 documents for user TrevorClient1 in results collection
2024-11-02 07:06:19,758 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-11-02 07:06:19,765 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 07:06:19,766 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 07:06:21,939 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:06:21,948 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 large bunch of fresh spinach', '2 cucumbers']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer (about 250g)']}, {'category': 'Pantry Items', 'items': ['1 can of chickpeas', '1 bag of brown basmati rice', '1 package of naan bread']}, {'category': 'Dairy', 'items': ['1 tub of plain yogurt']}, {'category': 'Spices', 'items': ['1 jar of garam masala', '1 jar of cumin seeds']}]}
2024-11-02 07:06:21,979 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP6FOjTMVUFxT7WtauPlfcAirrR5Y', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 large bunch of fresh spinach","2 cucumbers"]},{"category":"Meat/Protein","items":["1 block of paneer (about 250g)"]},{"category":"Pantry Items","items":["1 can of chickpeas","1 bag of brown basmati rice","1 package of naan bread"]},{"category":"Dairy","items":["1 tub of plain yogurt"]},{"category":"Spices","items":["1 jar of garam masala","1 jar of cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 large bunch of fresh spinach', '2 cucumbers']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer (about 250g)']), ShoppingListItem(category='Pantry Items', items=['1 can of chickpeas', '1 bag of brown basmati rice', '1 package of naan bread']), ShoppingListItem(category='Dairy', items=['1 tub of plain yogurt']), ShoppingListItem(category='Spices', items=['1 jar of garam masala', '1 jar of cumin seeds'])])))], created=1730545578, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=111, prompt_tokens=559, total_tokens=670, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:06:21,989 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 07:06:23,261 - Foodee.Orchestrator - INFO - Generated grocery list for session 8b5e1b56-04c0-4274-bebe-9c14191d4259
2024-11-02 07:06:28,269 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 07:06:28,304 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:06:28,308 - perplexity_find_prices - INFO - Processing item 1/9: 1 large bunch of fresh spinach
2024-11-02 07:06:35,475 - perplexity_find_prices - INFO - Processing item 2/9: 2 cucumbers
2024-11-02 07:06:41,373 - perplexity_find_prices - INFO - Processing item 3/9: 1 block of paneer (about 250g)
2024-11-02 07:06:47,183 - perplexity_find_prices - INFO - Processing item 4/9: 1 can of chickpeas
2024-11-02 07:06:52,570 - perplexity_find_prices - INFO - Processing item 5/9: 1 bag of brown basmati rice
2024-11-02 07:06:59,556 - perplexity_find_prices - INFO - Processing item 6/9: 1 package of naan bread
2024-11-02 07:07:04,178 - perplexity_find_prices - INFO - Processing item 7/9: 1 tub of plain yogurt
2024-11-02 07:07:08,839 - perplexity_find_prices - INFO - Processing item 8/9: 1 jar of garam masala
2024-11-02 07:07:12,919 - perplexity_find_prices - INFO - Processing item 9/9: 1 jar of cumin seeds
2024-11-02 07:07:20,466 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:07:20,467 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 8b5e1b56-04c0-4274-bebe-9c14191d4259
2024-11-02 07:07:20,467 - Foodee.Orchestrator - INFO - Total price for shopping list: $63.02
2024-11-02 07:07:25,473 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['8b5e1b56-04c0-4274-bebe-9c14191d4259']
2024-11-02 07:07:25,490 - Foodee.Orchestrator - ERROR - Error in message formatting: name 'List' is not defined
2024-11-02 07:07:25,491 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'List' is not defined
2024-11-02 07:07:25,491 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'List' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 569, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 430, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 464, in run_message_formatting
    from format_message import process_user_documents
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\..\comms\format_message.py", line 78, in <module>
    def process_user_documents(username: str, session_ids: List[str]):
                                                           ^^^^
NameError: name 'List' is not defined. Did you mean: 'list'?
2024-11-02 07:07:25,498 - Foodee.Orchestrator - ERROR - Error in main process: name 'List' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 594, in <module>
    loop.run_until_complete(main())
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 569, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 430, in orchestrate_full_process
    await self.run_message_formatting(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 464, in run_message_formatting
    from format_message import process_user_documents
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\..\comms\format_message.py", line 78, in <module>
    def process_user_documents(username: str, session_ids: List[str]):
                                                           ^^^^
NameError: name 'List' is not defined. Did you mean: 'list'?
2024-11-02 07:11:19,032 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:11:19,055 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5524
2024-11-02 07:11:19,056 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 07:11:19,056 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 1 iterations
2024-11-02 07:11:22,730 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:11:22,770 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Brown Rice', 'Cucumber Raita', 'Mixed Lentil Soup (Dal)'])
2024-11-02 07:11:22,773 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP6KGkFpILyo0MkhGiYOGsEnD8yo6', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Brown Rice","Cucumber Raita","Mixed Lentil Soup (Dal)"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Brown Rice', 'Cucumber Raita', 'Mixed Lentil Soup (Dal)']))))], created=1730545880, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=31, prompt_tokens=1182, total_tokens=1213, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:11:22,782 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 07:11:27,792 - Foodee.Orchestrator - INFO - Found 24 documents for user TrevorClient1 in results collection
2024-11-02 07:11:27,798 - Foodee.Orchestrator - INFO - Retrieved 1 session IDs from results collection
2024-11-02 07:11:27,804 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 07:11:27,804 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 07:11:30,640 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:11:30,648 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (around 200g)', '1 cucumber', '2 tomatoes', '2 onions', '1 bunch of cilantro', '1 lime']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer (about 200g)']}, {'category': 'Dairy', 'items': ['1 small container of plain yogurt']}, {'category': 'Pantry Items', 'items': ['1 bag of brown rice', '1 pack of mixed lentils']}, {'category': 'Spices', 'items': ['1 jar of cumin seeds', '1 jar of turmeric powder', '1 jar of garam masala']}]}
2024-11-02 07:11:30,656 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP6KMWuinsTevQA2mA1Lj17OWmZyO', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (around 200g)","1 cucumber","2 tomatoes","2 onions","1 bunch of cilantro","1 lime"]},{"category":"Meat/Protein","items":["1 block of paneer (about 200g)"]},{"category":"Dairy","items":["1 small container of plain yogurt"]},{"category":"Pantry Items","items":["1 bag of brown rice","1 pack of mixed lentils"]},{"category":"Spices","items":["1 jar of cumin seeds","1 jar of turmeric powder","1 jar of garam masala"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (around 200g)', '1 cucumber', '2 tomatoes', '2 onions', '1 bunch of cilantro', '1 lime']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer (about 200g)']), ShoppingListItem(category='Dairy', items=['1 small container of plain yogurt']), ShoppingListItem(category='Pantry Items', items=['1 bag of brown rice', '1 pack of mixed lentils']), ShoppingListItem(category='Spices', items=['1 jar of cumin seeds', '1 jar of turmeric powder', '1 jar of garam masala'])])))], created=1730545886, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=128, prompt_tokens=558, total_tokens=686, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:11:30,665 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 07:11:32,064 - Foodee.Orchestrator - INFO - Generated grocery list for session be1f2c37-0c49-4e4e-87a2-ebd32aba10bd
2024-11-02 07:11:37,073 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 07:11:37,108 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:11:37,111 - perplexity_find_prices - INFO - Processing item 1/13: 1 bag of spinach (around 200g)
2024-11-02 07:11:43,725 - perplexity_find_prices - INFO - Processing item 2/13: 1 cucumber
2024-11-02 07:11:49,818 - perplexity_find_prices - INFO - Processing item 3/13: 2 tomatoes
2024-11-02 07:11:54,713 - perplexity_find_prices - INFO - Processing item 4/13: 2 onions
2024-11-02 07:12:03,645 - perplexity_find_prices - INFO - Processing item 5/13: 1 bunch of cilantro
2024-11-02 07:12:07,593 - perplexity_find_prices - INFO - Processing item 6/13: 1 lime
2024-11-02 07:12:10,618 - perplexity_find_prices - INFO - Processing item 7/13: 1 block of paneer (about 200g)
2024-11-02 07:12:17,149 - perplexity_find_prices - INFO - Processing item 8/13: 1 small container of plain yogurt
2024-11-02 07:12:23,065 - perplexity_find_prices - INFO - Processing item 9/13: 1 bag of brown rice
2024-11-02 07:12:31,026 - perplexity_find_prices - INFO - Processing item 10/13: 1 pack of mixed lentils
2024-11-02 07:12:36,939 - perplexity_find_prices - INFO - Processing item 11/13: 1 jar of cumin seeds
2024-11-02 07:12:45,501 - perplexity_find_prices - INFO - Processing item 12/13: 1 jar of turmeric powder
2024-11-02 07:12:54,243 - perplexity_find_prices - INFO - Processing item 13/13: 1 jar of garam masala
2024-11-02 07:12:57,928 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:12:57,929 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session be1f2c37-0c49-4e4e-87a2-ebd32aba10bd
2024-11-02 07:12:57,929 - Foodee.Orchestrator - INFO - Total price for shopping list: $69.87
2024-11-02 07:13:02,939 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['be1f2c37-0c49-4e4e-87a2-ebd32aba10bd']
2024-11-02 07:13:05,466 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:13:05,471 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-02 07:13:05,471 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1 with sessions ['be1f2c37-0c49-4e4e-87a2-ebd32aba10bd']
2024-11-02 07:13:05,531 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-02 07:13:05,532 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-02 07:13:05,532 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-02 07:13:05,568 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: be1f2c37-0c49-4e4e-87a2-ebd32aba10bd
2024-11-02 07:13:05,574 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-02 07:13:05,575 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Palak Paneer', 'sides': ['Brown Rice', 'Cucumber Raita', 'Mixed Lentil Soup (Dal)']}]
2024-11-02 07:13:35,217 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:13:35,229 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-02 07:13:35,234 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 07:13:35,235 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session be1f2c37-0c49-4e4e-87a2-ebd32aba10bd
2024-11-02 07:13:35,235 - Foodee.Orchestrator - INFO - Completed recipe and nutrition generation for user TrevorClient1
2024-11-02 07:13:40,244 - Foodee.Orchestrator - INFO - Reading nutrition information for user TrevorClient1
2024-11-02 07:13:40,272 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-11-02 07:20:31,829 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:20:31,861 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5525
2024-11-02 07:20:31,864 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-02 07:20:31,864 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 3 iterations
2024-11-02 07:20:35,764 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:35,802 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer with Brown Rice', sides=['Chana Salad (Chickpea Salad)', 'Cucumber Raita'])
2024-11-02 07:20:35,805 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP6TB1ABeVSV8uS589w2pjAidyDJz', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer with Brown Rice","sides":["Chana Salad (Chickpea Salad)","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer with Brown Rice', sides=['Chana Salad (Chickpea Salad)', 'Cucumber Raita']))))], created=1730546433, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=33, prompt_tokens=1182, total_tokens=1215, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:36,988 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:36,991 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer', sides=['Whole Wheat Roti', 'Cucumber Raita'])
2024-11-02 07:20:36,995 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP6TCl7iIRC3giam0mlmtJwxBnsPQ', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer","sides":["Whole Wheat Roti","Cucumber Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer', sides=['Whole Wheat Roti', 'Cucumber Raita']))))], created=1730546434, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=25, prompt_tokens=1182, total_tokens=1207, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:38,512 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:38,515 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Chickpea and Paneer Curry (Chana Paneer Masala)', sides=['Brown Basmati Rice', 'Mixed Vegetable Raita', 'Whole Wheat Roti'])
2024-11-02 07:20:38,518 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AP6TEQsEzGgtbj2UbrxCu08vsSdnY', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Chickpea and Paneer Curry (Chana Paneer Masala)","sides":["Brown Basmati Rice","Mixed Vegetable Raita","Whole Wheat Roti"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Chickpea and Paneer Curry (Chana Paneer Masala)', sides=['Brown Basmati Rice', 'Mixed Vegetable Raita', 'Whole Wheat Roti']))))], created=1730546436, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=42, prompt_tokens=1182, total_tokens=1224, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:38,525 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-02 07:20:43,544 - Foodee.Orchestrator - INFO - Found 27 documents for user TrevorClient1 in results collection
2024-11-02 07:20:43,551 - Foodee.Orchestrator - INFO - Retrieved 3 session IDs from results collection
2024-11-02 07:20:43,557 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-02 07:20:43,557 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-02 07:20:46,808 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:46,818 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 onion', '1 garlic bulb', '1-inch ginger piece', '1 bunch cilantro', '1 small cucumber', '1 small carrot', '1 small tomato']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 200g)', '1 can of chickpeas (400g)']}, {'category': 'Dairy', 'items': ['1 container plain yogurt (about 500g)']}, {'category': 'Grains', 'items': ['1 bag of brown basmati rice (1kg)', '1 pack of whole wheat roti (10 count)']}, {'category': 'Spices', 'items': ['1 small pack of garam masala', '1 small pack of ground cumin', '1 small pack of turmeric', '1 small pack of red chili powder', '1 small pack of ground coriander']}]}
2024-11-02 07:20:46,844 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP6TKpe6Z9tIx8DsIdnc5XOMNWxad', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 onion","1 garlic bulb","1-inch ginger piece","1 bunch cilantro","1 small cucumber","1 small carrot","1 small tomato"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 200g)","1 can of chickpeas (400g)"]},{"category":"Dairy","items":["1 container plain yogurt (about 500g)"]},{"category":"Grains","items":["1 bag of brown basmati rice (1kg)","1 pack of whole wheat roti (10 count)"]},{"category":"Spices","items":["1 small pack of garam masala","1 small pack of ground cumin","1 small pack of turmeric","1 small pack of red chili powder","1 small pack of ground coriander"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 onion', '1 garlic bulb', '1-inch ginger piece', '1 bunch cilantro', '1 small cucumber', '1 small carrot', '1 small tomato']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 200g)', '1 can of chickpeas (400g)']), ShoppingListItem(category='Dairy', items=['1 container plain yogurt (about 500g)']), ShoppingListItem(category='Grains', items=['1 bag of brown basmati rice (1kg)', '1 pack of whole wheat roti (10 count)']), ShoppingListItem(category='Spices', items=['1 small pack of garam masala', '1 small pack of ground cumin', '1 small pack of turmeric', '1 small pack of red chili powder', '1 small pack of ground coriander'])])))], created=1730546442, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=169, prompt_tokens=569, total_tokens=738, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:46,852 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 07:20:48,023 - Foodee.Orchestrator - INFO - Generated grocery list for session 8e35c8dd-b756-454e-8484-24a551c32c16
2024-11-02 07:20:50,159 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:50,165 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '1 cucumber']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 250g)']}, {'category': 'Dairy', 'items': ['1 tub of yogurt (about 500g)']}, {'category': 'bakery', 'items': ['1 pack of whole wheat roti (10 pieces)']}, {'category': 'Spices', 'items': ['garam masala', 'ground turmeric', 'cumin seeds', 'salt']}, {'category': 'Pantry Items', 'items': ['wheat flour']}]}
2024-11-02 07:20:50,169 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP6TOyZtZksJTwJwXWzCYq8KJQ3xh', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","1 cucumber"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 250g)"]},{"category":"Dairy","items":["1 tub of yogurt (about 500g)"]},{"category":"bakery","items":["1 pack of whole wheat roti (10 pieces)"]},{"category":"Spices","items":["garam masala","ground turmeric","cumin seeds","salt"]},{"category":"Pantry Items","items":["wheat flour"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '1 cucumber']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 250g)']), ShoppingListItem(category='Dairy', items=['1 tub of yogurt (about 500g)']), ShoppingListItem(category='bakery', items=['1 pack of whole wheat roti (10 pieces)']), ShoppingListItem(category='Spices', items=['garam masala', 'ground turmeric', 'cumin seeds', 'salt']), ShoppingListItem(category='Pantry Items', items=['wheat flour'])])))], created=1730546446, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=123, prompt_tokens=551, total_tokens=674, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:50,178 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 07:20:51,364 - Foodee.Orchestrator - INFO - Generated grocery list for session da55f9c5-c375-474b-9bdf-19480b301643
2024-11-02 07:20:55,571 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:20:55,577 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bunch of spinach (about 300g)', '1 cucumber', '1 bunch of cilantro', '2 medium tomatoes', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 package of paneer cheese (about 200g)', '1 can of chickpeas (15 oz)']}, {'category': 'Dairy', 'items': ['1 tub of yogurt (about 500g)']}, {'category': 'Pantry Items', 'items': ['1 bag of brown rice (1 kg)']}, {'category': 'Spices', 'items': ['1 packet of garam masala', '1 packet of cumin seeds', '1 packet of coriander powder']}]}
2024-11-02 07:20:55,580 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AP6TSQ15KqaBCOLHXYmJBjTwMHhyc', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bunch of spinach (about 300g)","1 cucumber","1 bunch of cilantro","2 medium tomatoes","1 lemon"]},{"category":"Meat/Protein","items":["1 package of paneer cheese (about 200g)","1 can of chickpeas (15 oz)"]},{"category":"Dairy","items":["1 tub of yogurt (about 500g)"]},{"category":"Pantry Items","items":["1 bag of brown rice (1 kg)"]},{"category":"Spices","items":["1 packet of garam masala","1 packet of cumin seeds","1 packet of coriander powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bunch of spinach (about 300g)', '1 cucumber', '1 bunch of cilantro', '2 medium tomatoes', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 package of paneer cheese (about 200g)', '1 can of chickpeas (15 oz)']), ShoppingListItem(category='Dairy', items=['1 tub of yogurt (about 500g)']), ShoppingListItem(category='Pantry Items', items=['1 bag of brown rice (1 kg)']), ShoppingListItem(category='Spices', items=['1 packet of garam masala', '1 packet of cumin seeds', '1 packet of coriander powder'])])))], created=1730546450, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=138, prompt_tokens=558, total_tokens=696, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 07:20:55,589 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 07:20:56,782 - Foodee.Orchestrator - INFO - Generated grocery list for session 789d4757-80f4-4d44-a108-13647f9da30b
2024-11-02 07:21:01,789 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-02 07:21:01,818 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 07:21:01,822 - perplexity_find_prices - INFO - Processing item 1/17: 1 onion
2024-11-02 07:21:12,069 - perplexity_find_prices - INFO - Processing item 2/17: 1 garlic bulb
2024-11-02 07:21:20,740 - perplexity_find_prices - INFO - Processing item 3/17: 1-inch ginger piece
2024-11-02 07:21:29,232 - perplexity_find_prices - INFO - Processing item 4/17: 1 bunch cilantro
2024-11-02 07:21:33,460 - perplexity_find_prices - INFO - Processing item 5/17: 1 small cucumber
2024-11-02 07:21:39,053 - perplexity_find_prices - INFO - Processing item 6/17: 1 small carrot
2024-11-02 07:21:46,296 - perplexity_find_prices - INFO - Processing item 7/17: 1 small tomato
2024-11-02 07:21:53,175 - perplexity_find_prices - INFO - Processing item 8/17: 1 pack of paneer (about 200g)
2024-11-02 07:21:58,759 - perplexity_find_prices - INFO - Processing item 9/17: 1 can of chickpeas (400g)
2024-11-02 07:22:07,518 - perplexity_find_prices - INFO - Processing item 10/17: 1 container plain yogurt (about 500g)
2024-11-02 07:22:15,145 - perplexity_find_prices - INFO - Processing item 11/17: 1 bag of brown basmati rice (1kg)
2024-11-02 07:22:21,381 - perplexity_find_prices - INFO - Processing item 12/17: 1 pack of whole wheat roti (10 count)
2024-11-02 07:22:28,863 - perplexity_find_prices - INFO - Processing item 13/17: 1 small pack of garam masala
2024-11-02 07:22:34,291 - perplexity_find_prices - INFO - Processing item 14/17: 1 small pack of ground cumin
2024-11-02 07:22:42,812 - perplexity_find_prices - INFO - Processing item 15/17: 1 small pack of turmeric
2024-11-02 07:22:51,115 - perplexity_find_prices - INFO - Processing item 16/17: 1 small pack of red chili powder
2024-11-02 07:22:57,754 - perplexity_find_prices - INFO - Processing item 17/17: 1 small pack of ground coriander
2024-11-02 07:23:02,396 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:23:02,397 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 8e35c8dd-b756-454e-8484-24a551c32c16
2024-11-02 07:23:02,397 - Foodee.Orchestrator - INFO - Total price for shopping list: $45.41
2024-11-02 07:23:02,401 - perplexity_find_prices - INFO - Processing item 1/10: 1 bag of spinach (about 200g)
2024-11-02 07:23:10,842 - perplexity_find_prices - INFO - Processing item 2/10: 1 cucumber
2024-11-02 07:23:17,150 - perplexity_find_prices - INFO - Processing item 3/10: 1 pack of paneer (about 250g)
2024-11-02 07:23:26,935 - perplexity_find_prices - INFO - Processing item 4/10: 1 tub of yogurt (about 500g)
2024-11-02 07:23:37,200 - perplexity_find_prices - INFO - Processing item 5/10: 1 pack of whole wheat roti (10 pieces)
2024-11-02 07:23:45,326 - perplexity_find_prices - INFO - Processing item 6/10: garam masala
2024-11-02 07:23:52,663 - perplexity_find_prices - INFO - Processing item 7/10: ground turmeric
2024-11-02 07:23:58,754 - perplexity_find_prices - INFO - Processing item 8/10: cumin seeds
2024-11-02 07:24:03,529 - perplexity_find_prices - INFO - Processing item 9/10: salt
2024-11-02 07:24:09,895 - perplexity_find_prices - INFO - Processing item 10/10: wheat flour
2024-11-02 07:24:12,442 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:24:12,443 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session da55f9c5-c375-474b-9bdf-19480b301643
2024-11-02 07:24:12,443 - Foodee.Orchestrator - INFO - Total price for shopping list: $31.26
2024-11-02 07:24:12,447 - perplexity_find_prices - INFO - Processing item 1/12: 1 bunch of spinach (about 300g)
2024-11-02 07:24:17,399 - perplexity_find_prices - INFO - Processing item 2/12: 1 cucumber
2024-11-02 07:24:24,899 - perplexity_find_prices - INFO - Processing item 3/12: 1 bunch of cilantro
2024-11-02 07:24:30,510 - perplexity_find_prices - INFO - Processing item 4/12: 2 medium tomatoes
2024-11-02 07:24:36,112 - perplexity_find_prices - INFO - Processing item 5/12: 1 lemon
2024-11-02 07:24:39,965 - perplexity_find_prices - INFO - Processing item 6/12: 1 package of paneer cheese (about 200g)
2024-11-02 07:24:45,119 - perplexity_find_prices - INFO - Processing item 7/12: 1 can of chickpeas (15 oz)
2024-11-02 07:24:50,681 - perplexity_find_prices - INFO - Processing item 8/12: 1 tub of yogurt (about 500g)
2024-11-02 07:24:58,172 - perplexity_find_prices - INFO - Processing item 9/12: 1 bag of brown rice (1 kg)
2024-11-02 07:25:01,825 - perplexity_find_prices - INFO - Processing item 10/12: 1 packet of garam masala
2024-11-02 07:25:06,591 - perplexity_find_prices - INFO - Processing item 11/12: 1 packet of cumin seeds
2024-11-02 07:25:14,369 - perplexity_find_prices - INFO - Processing item 12/12: 1 packet of coriander powder
2024-11-02 07:25:18,959 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-02 07:25:18,960 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 789d4757-80f4-4d44-a108-13647f9da30b
2024-11-02 07:25:18,960 - Foodee.Orchestrator - INFO - Total price for shopping list: $34.60
2024-11-02 07:25:23,963 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['8e35c8dd-b756-454e-8484-24a551c32c16', 'da55f9c5-c375-474b-9bdf-19480b301643', '789d4757-80f4-4d44-a108-13647f9da30b']
2024-11-02 07:25:28,079 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:25:28,084 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-02 07:25:28,084 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1 with sessions ['8e35c8dd-b756-454e-8484-24a551c32c16', 'da55f9c5-c375-474b-9bdf-19480b301643', '789d4757-80f4-4d44-a108-13647f9da30b']
2024-11-02 07:25:28,122 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-02 07:25:28,123 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-02 07:25:28,123 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-02 07:25:28,150 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 8e35c8dd-b756-454e-8484-24a551c32c16
2024-11-02 07:25:28,155 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-02 07:25:28,156 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Chickpea and Paneer Curry (Chana Paneer Masala)', 'sides': ['Brown Basmati Rice', 'Mixed Vegetable Raita', 'Whole Wheat Roti']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer', 'sides': ['Whole Wheat Roti', 'Cucumber Raita']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer with Brown Rice', 'sides': ['Chana Salad (Chickpea Salad)', 'Cucumber Raita']}]
2024-11-02 07:25:47,052 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:25:47,063 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-02 07:25:47,067 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 07:25:47,067 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 8e35c8dd-b756-454e-8484-24a551c32c16
2024-11-02 07:25:47,067 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: da55f9c5-c375-474b-9bdf-19480b301643
2024-11-02 07:25:47,074 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-02 07:25:47,075 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Chickpea and Paneer Curry (Chana Paneer Masala)', 'sides': ['Brown Basmati Rice', 'Mixed Vegetable Raita', 'Whole Wheat Roti']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer', 'sides': ['Whole Wheat Roti', 'Cucumber Raita']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer with Brown Rice', 'sides': ['Chana Salad (Chickpea Salad)', 'Cucumber Raita']}]
2024-11-02 07:26:04,595 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:26:04,600 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-02 07:26:04,603 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 07:26:04,604 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session da55f9c5-c375-474b-9bdf-19480b301643
2024-11-02 07:26:04,604 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 789d4757-80f4-4d44-a108-13647f9da30b
2024-11-02 07:26:04,610 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-02 07:26:04,611 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Chickpea and Paneer Curry (Chana Paneer Masala)', 'sides': ['Brown Basmati Rice', 'Mixed Vegetable Raita', 'Whole Wheat Roti']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer', 'sides': ['Whole Wheat Roti', 'Cucumber Raita']}, {'date': '2024-11-02', 'main_dish': 'Palak Paneer with Brown Rice', 'sides': ['Chana Salad (Chickpea Salad)', 'Cucumber Raita']}]
2024-11-02 07:26:28,285 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 07:26:28,290 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-02 07:26:28,294 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 07:26:28,294 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 789d4757-80f4-4d44-a108-13647f9da30b
2024-11-02 07:26:28,295 - Foodee.Orchestrator - INFO - Completed recipe and nutrition generation for user TrevorClient1
2024-11-02 07:26:33,302 - Foodee.Orchestrator - INFO - Reading nutrition information for user TrevorClient1
2024-11-02 07:26:33,310 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
2024-11-02 11:22:09,824 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 11:22:09,850 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5528
2024-11-02 11:22:09,852 - Foodee.Orchestrator - INFO - Starting full Foodee process for user GaryTheGrillMaster
2024-11-02 11:22:09,852 - Foodee.Orchestrator - INFO - Starting meal generation for user GaryTheGrillMaster with 3 iterations
2024-11-02 11:22:13,538 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:13,582 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potatoes', 'Garden Salad'])
2024-11-02 11:22:13,611 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APAF1EphCckfCf2tLrOFGK5XkaN7P', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lemon Herb Chicken","sides":["Roasted Sweet Potatoes","Garden Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potatoes', 'Garden Salad']))))], created=1730560931, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=25, prompt_tokens=1211, total_tokens=1236, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:15,256 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:15,259 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potatoes', 'Mixed Greens Salad with Citrus Vinaigrette', 'Grilled Asparagus'])
2024-11-02 11:22:15,263 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APAF3RsgfuqTrgns6DHy4TWWCmDYA', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lemon Herb Chicken","sides":["Roasted Sweet Potatoes","Mixed Greens Salad with Citrus Vinaigrette","Grilled Asparagus"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potatoes', 'Mixed Greens Salad with Citrus Vinaigrette', 'Grilled Asparagus']))))], created=1730560933, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=37, prompt_tokens=1211, total_tokens=1248, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:17,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:17,106 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest', 'Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette'])
2024-11-02 11:22:17,111 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APAF41mDVv5VNRQCO0a5vcoLIseJD', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Lemon Herb Chicken","sides":["Roasted Sweet Potato Wedges with Rosemary","Grilled Asparagus with Lemon Zest","Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Lemon Herb Chicken', sides=['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest', 'Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette']))))], created=1730560934, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=50, prompt_tokens=1211, total_tokens=1261, prompt_tokens_details={'cached_tokens': 1024}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:17,122 - Foodee.Orchestrator - INFO - Completed meal generation for user GaryTheGrillMaster
2024-11-02 11:22:22,131 - Foodee.Orchestrator - INFO - Found 42 documents for user GaryTheGrillMaster in results collection
2024-11-02 11:22:22,139 - Foodee.Orchestrator - INFO - Retrieved 3 session IDs from results collection
2024-11-02 11:22:22,146 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('671f731ad11ff5753ab9edfd'), 'username': 'GaryTheGrillMaster', 'session_id': 'a5362c4d-0734-4804-a10b-4fdf3b9f6a44', 'content': {'meal_type': {'meal': 'Grilled Lemon Thyme Turkey Breast', 'sides': ['Roasted Sweet Potatoes with Rosemary', 'Sauteed Spinach with Garlic and Olive Oil', 'Carrot and Apple Slaw']}}, 'datetimeimported': datetime.datetime(2024, 10, 28, 7, 18, 50, 545000)}
2024-11-02 11:22:22,146 - Foodee.Orchestrator - INFO - Generating grocery lists for user GaryTheGrillMaster
2024-11-02 11:22:26,832 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:26,845 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of chicken breasts (about 500g)']}, {'category': 'Produce', 'items': ['2 lemons', '1 bunch of rosemary', '1 bunch of asparagus', '1 bag of sweet potatoes (about 1 kg)', '1 bag of mixed greens', '1 pack of sunflower seeds']}, {'category': 'Dairy', 'items': ['1 small block of Parmesan cheese (for grating)']}, {'category': 'Pantry Items', 'items': ['1 bottle of balsamic vinaigrette']}, {'category': 'Spices', 'items': ['Dried herbs blend (e.g., Italian seasoning if not available)']}]}
2024-11-02 11:22:26,854 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APAFC9maFWVj9sYlagtmDQrMafmXT', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of chicken breasts (about 500g)"]},{"category":"Produce","items":["2 lemons","1 bunch of rosemary","1 bunch of asparagus","1 bag of sweet potatoes (about 1 kg)","1 bag of mixed greens","1 pack of sunflower seeds"]},{"category":"Dairy","items":["1 small block of Parmesan cheese (for grating)"]},{"category":"Pantry Items","items":["1 bottle of balsamic vinaigrette"]},{"category":"Spices","items":["Dried herbs blend (e.g., Italian seasoning if not available)"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of chicken breasts (about 500g)']), ShoppingListItem(category='Produce', items=['2 lemons', '1 bunch of rosemary', '1 bunch of asparagus', '1 bag of sweet potatoes (about 1 kg)', '1 bag of mixed greens', '1 pack of sunflower seeds']), ShoppingListItem(category='Dairy', items=['1 small block of Parmesan cheese (for grating)']), ShoppingListItem(category='Pantry Items', items=['1 bottle of balsamic vinaigrette']), ShoppingListItem(category='Spices', items=['Dried herbs blend (e.g., Italian seasoning if not available)'])])))], created=1730560942, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=133, prompt_tokens=578, total_tokens=711, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:26,869 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 11:22:28,181 - Foodee.Orchestrator - INFO - Generated grocery list for session 4f43d8c7-46dd-4274-b298-575dd04a1f64
2024-11-02 11:22:29,238 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:29,244 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 pack of lemons', '1 bag of sweet potatoes', '1 bag of mixed greens', '1 bunch of asparagus']}, {'category': 'Meat/Protein', 'items': ['1 pack of chicken breasts (about 500g)']}, {'category': 'Pantry Items', 'items': ['1 bottle of citrus vinaigrette']}]}
2024-11-02 11:22:29,251 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APAFGenQ5QLllmwiTglxrTamlCuTv', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 pack of lemons","1 bag of sweet potatoes","1 bag of mixed greens","1 bunch of asparagus"]},{"category":"Meat/Protein","items":["1 pack of chicken breasts (about 500g)"]},{"category":"Pantry Items","items":["1 bottle of citrus vinaigrette"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 pack of lemons', '1 bag of sweet potatoes', '1 bag of mixed greens', '1 bunch of asparagus']), ShoppingListItem(category='Meat/Protein', items=['1 pack of chicken breasts (about 500g)']), ShoppingListItem(category='Pantry Items', items=['1 bottle of citrus vinaigrette'])])))], created=1730560946, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=74, prompt_tokens=565, total_tokens=639, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:29,271 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 11:22:30,822 - Foodee.Orchestrator - INFO - Generated grocery list for session 03f0794d-ca30-4d0b-a368-d78d801493ef
2024-11-02 11:22:32,225 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:22:32,233 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of chicken breasts (about 500g)']}, {'category': 'Produce', 'items': ['2 lemons', '1 pack of fresh herbs (such as rosemary and thyme)', '3 large sweet potatoes', '1 bag of mixed salad greens', '1 cucumber', '1 pint cherry tomatoes']}, {'category': 'Pantry Items', 'items': ['1 bottle olive oil', '1 bottle balsamic vinegar']}, {'category': 'Spices', 'items': ['1 jar of dried oregano']}]}
2024-11-02 11:22:32,237 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APAFJ2TJ3hEMmHC1dNv8AYv0C0rLK', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of chicken breasts (about 500g)"]},{"category":"Produce","items":["2 lemons","1 pack of fresh herbs (such as rosemary and thyme)","3 large sweet potatoes","1 bag of mixed salad greens","1 cucumber","1 pint cherry tomatoes"]},{"category":"Pantry Items","items":["1 bottle olive oil","1 bottle balsamic vinegar"]},{"category":"Spices","items":["1 jar of dried oregano"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of chicken breasts (about 500g)']), ShoppingListItem(category='Produce', items=['2 lemons', '1 pack of fresh herbs (such as rosemary and thyme)', '3 large sweet potatoes', '1 bag of mixed salad greens', '1 cucumber', '1 pint cherry tomatoes']), ShoppingListItem(category='Pantry Items', items=['1 bottle olive oil', '1 bottle balsamic vinegar']), ShoppingListItem(category='Spices', items=['1 jar of dried oregano'])])))], created=1730560949, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=105, prompt_tokens=551, total_tokens=656, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 11:22:32,247 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 11:22:33,742 - Foodee.Orchestrator - INFO - Generated grocery list for session 942fb6e6-d488-44c8-9e56-89bfd45fc2d7
2024-11-02 11:22:38,750 - Foodee.Orchestrator - INFO - Starting price lookup for user GaryTheGrillMaster
2024-11-02 11:22:38,794 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 11:22:39,012 - perplexity_find_prices - INFO - Processing item 1/10: 1 pack of chicken breasts (about 500g)
2024-11-02 11:22:43,724 - perplexity_find_prices - INFO - Processing item 2/10: 2 lemons
2024-11-02 11:22:48,542 - perplexity_find_prices - INFO - Processing item 3/10: 1 bunch of rosemary
2024-11-02 11:22:54,372 - perplexity_find_prices - INFO - Processing item 4/10: 1 bunch of asparagus
2024-11-02 11:23:00,081 - perplexity_find_prices - INFO - Processing item 5/10: 1 bag of sweet potatoes (about 1 kg)
2024-11-02 11:23:04,920 - perplexity_find_prices - INFO - Processing item 6/10: 1 bag of mixed greens
2024-11-02 11:23:11,448 - perplexity_find_prices - INFO - Processing item 7/10: 1 pack of sunflower seeds
2024-11-02 11:23:20,995 - perplexity_find_prices - INFO - Processing item 8/10: 1 small block of Parmesan cheese (for grating)
2024-11-02 11:23:27,141 - perplexity_find_prices - INFO - Processing item 9/10: 1 bottle of balsamic vinaigrette
2024-11-02 11:23:32,875 - perplexity_find_prices - INFO - Processing item 10/10: Dried herbs blend (e.g., Italian seasoning if not available)
2024-11-02 11:23:38,305 - perplexity_find_prices - INFO - Generated shopping list with prices for user: GaryTheGrillMaster
2024-11-02 11:23:38,306 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 4f43d8c7-46dd-4274-b298-575dd04a1f64
2024-11-02 11:23:38,306 - Foodee.Orchestrator - INFO - Total price for shopping list: $67.50
2024-11-02 11:23:38,312 - perplexity_find_prices - INFO - Processing item 1/6: 1 pack of lemons
2024-11-02 11:23:44,351 - perplexity_find_prices - INFO - Processing item 2/6: 1 bag of sweet potatoes
2024-11-02 11:23:51,307 - perplexity_find_prices - INFO - Processing item 3/6: 1 bag of mixed greens
2024-11-02 11:23:56,633 - perplexity_find_prices - INFO - Processing item 4/6: 1 bunch of asparagus
2024-11-02 11:24:01,963 - perplexity_find_prices - INFO - Processing item 5/6: 1 pack of chicken breasts (about 500g)
2024-11-02 11:24:06,462 - perplexity_find_prices - INFO - Processing item 6/6: 1 bottle of citrus vinaigrette
2024-11-02 11:24:10,102 - perplexity_find_prices - WARNING - Could not extract price from response for item: 1 bottle of citrus vinaigrette
2024-11-02 11:24:15,584 - perplexity_find_prices - INFO - Generated shopping list with prices for user: GaryTheGrillMaster
2024-11-02 11:24:15,585 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 03f0794d-ca30-4d0b-a368-d78d801493ef
2024-11-02 11:24:15,585 - Foodee.Orchestrator - INFO - Total price for shopping list: $21.59
2024-11-02 11:24:15,589 - perplexity_find_prices - INFO - Processing item 1/10: 1 pack of chicken breasts (about 500g)
2024-11-02 11:24:21,743 - perplexity_find_prices - INFO - Processing item 2/10: 2 lemons
2024-11-02 11:24:27,049 - perplexity_find_prices - INFO - Processing item 3/10: 1 pack of fresh herbs (such as rosemary and thyme)
2024-11-02 11:24:31,966 - perplexity_find_prices - INFO - Processing item 4/10: 3 large sweet potatoes
2024-11-02 11:24:38,412 - perplexity_find_prices - INFO - Processing item 5/10: 1 bag of mixed salad greens
2024-11-02 11:24:44,332 - perplexity_find_prices - INFO - Processing item 6/10: 1 cucumber
2024-11-02 11:24:51,959 - perplexity_find_prices - INFO - Processing item 7/10: 1 pint cherry tomatoes
2024-11-02 11:24:55,928 - perplexity_find_prices - INFO - Processing item 8/10: 1 bottle olive oil
2024-11-02 11:25:03,917 - perplexity_find_prices - INFO - Processing item 9/10: 1 bottle balsamic vinegar
2024-11-02 11:25:09,848 - perplexity_find_prices - INFO - Processing item 10/10: 1 jar of dried oregano
2024-11-02 11:25:16,567 - perplexity_find_prices - INFO - Generated shopping list with prices for user: GaryTheGrillMaster
2024-11-02 11:25:16,568 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 942fb6e6-d488-44c8-9e56-89bfd45fc2d7
2024-11-02 11:25:16,568 - Foodee.Orchestrator - INFO - Total price for shopping list: $39.23
2024-11-02 11:25:21,585 - Foodee.Orchestrator - INFO - Starting message formatting for user GaryTheGrillMaster with sessions ['4f43d8c7-46dd-4274-b298-575dd04a1f64', '03f0794d-ca30-4d0b-a368-d78d801493ef', '942fb6e6-d488-44c8-9e56-89bfd45fc2d7']
2024-11-02 11:25:26,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:25:26,697 - Foodee.Orchestrator - INFO - Completed message formatting for user GaryTheGrillMaster
2024-11-02 11:25:26,698 - Foodee.Orchestrator - INFO - Displaying formatted messages for user GaryTheGrillMaster with sessions ['4f43d8c7-46dd-4274-b298-575dd04a1f64', '03f0794d-ca30-4d0b-a368-d78d801493ef', '942fb6e6-d488-44c8-9e56-89bfd45fc2d7']
2024-11-02 11:25:26,747 - outbound_messages - INFO - Stored meal data for nutrition processing for user: GaryTheGrillMaster
2024-11-02 11:25:26,749 - Foodee.Orchestrator - INFO - Completed displaying messages for user GaryTheGrillMaster
2024-11-02 11:25:26,749 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user GaryTheGrillMaster
2024-11-02 11:25:26,791 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 4f43d8c7-46dd-4274-b298-575dd04a1f64
2024-11-02 11:25:26,799 - recipe_nutrition - INFO - Successfully fetched meal plans for user: GaryTheGrillMaster
2024-11-02 11:25:26,800 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest', 'Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Mixed Greens Salad with Citrus Vinaigrette', 'Grilled Asparagus']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Garden Salad']}]
2024-11-02 11:25:39,959 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:25:39,976 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: GaryTheGrillMaster
2024-11-02 11:25:39,980 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 11:25:39,980 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 4f43d8c7-46dd-4274-b298-575dd04a1f64
2024-11-02 11:25:39,981 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 03f0794d-ca30-4d0b-a368-d78d801493ef
2024-11-02 11:25:39,988 - recipe_nutrition - INFO - Successfully fetched meal plans for user: GaryTheGrillMaster
2024-11-02 11:25:39,990 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest', 'Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Mixed Greens Salad with Citrus Vinaigrette', 'Grilled Asparagus']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Garden Salad']}]
2024-11-02 11:25:55,313 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:25:55,322 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: GaryTheGrillMaster
2024-11-02 11:25:55,326 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 11:25:55,327 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 03f0794d-ca30-4d0b-a368-d78d801493ef
2024-11-02 11:25:55,327 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 942fb6e6-d488-44c8-9e56-89bfd45fc2d7
2024-11-02 11:25:55,334 - recipe_nutrition - INFO - Successfully fetched meal plans for user: GaryTheGrillMaster
2024-11-02 11:25:55,335 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potato Wedges with Rosemary', 'Grilled Asparagus with Lemon Zest', 'Mixed Green Salad with Sunflower Seeds and Balsamic Vinaigrette']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Mixed Greens Salad with Citrus Vinaigrette', 'Grilled Asparagus']}, {'date': '2024-11-02', 'main_dish': 'Grilled Lemon Herb Chicken', 'sides': ['Roasted Sweet Potatoes', 'Garden Salad']}]
2024-11-02 11:26:09,390 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 11:26:09,397 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: GaryTheGrillMaster
2024-11-02 11:26:09,405 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 11:26:09,405 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 942fb6e6-d488-44c8-9e56-89bfd45fc2d7
2024-11-02 11:26:09,405 - Foodee.Orchestrator - INFO - Completed recipe and nutrition generation for user GaryTheGrillMaster
2024-11-02 11:26:14,415 - Foodee.Orchestrator - INFO - Reading nutrition information for user GaryTheGrillMaster
2024-11-02 11:26:14,425 - Foodee.Orchestrator - INFO - Completed full Foodee process for user GaryTheGrillMaster
2024-11-02 22:42:57,338 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 22:42:57,367 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5727
2024-11-02 22:42:57,369 - Foodee.Orchestrator - INFO - Starting full Foodee process for user admin
2024-11-02 22:42:57,370 - Foodee.Orchestrator - INFO - Starting meal generation for user admin with 3 iterations
2024-11-02 22:43:01,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:01,474 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Pan-Seared Scallops with Lemon Basil Butter', sides=['Roasted Garlic Mashed Potatoes', 'Steamed Asparagus with Lemon Zest'])
2024-11-02 22:43:01,477 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APKrttmpJXPrCnNwxv9TdXpN5U4q0', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Pan-Seared Scallops with Lemon Basil Butter","sides":["Roasted Garlic Mashed Potatoes","Steamed Asparagus with Lemon Zest"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Pan-Seared Scallops with Lemon Basil Butter', sides=['Roasted Garlic Mashed Potatoes', 'Steamed Asparagus with Lemon Zest']))))], created=1730601781, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=38, prompt_tokens=1001, total_tokens=1039, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:02,860 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:02,863 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Roasted Garlic and Herb Pork Tenderloin', sides=['Quinoa Salad with Cucumber and Dill', 'Steamed Broccoli with Lemon Zest'])
2024-11-02 22:43:02,884 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APKruXt551QqOiax75JLMIMRxR5a5', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Roasted Garlic and Herb Pork Tenderloin","sides":["Quinoa Salad with Cucumber and Dill","Steamed Broccoli with Lemon Zest"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Roasted Garlic and Herb Pork Tenderloin', sides=['Quinoa Salad with Cucumber and Dill', 'Steamed Broccoli with Lemon Zest']))))], created=1730601782, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=37, prompt_tokens=1004, total_tokens=1041, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:04,299 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:04,302 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Braised Balsamic Short Ribs with Thyme', sides=['Creamy Polenta (using gluten-free cornmeal)', 'Honey-Glazed Carrots'])
2024-11-02 22:43:04,306 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-APKrwMWahpbgVJaJMOAwh8nOESVef', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Braised Balsamic Short Ribs with Thyme","sides":["Creamy Polenta (using gluten-free cornmeal)","Honey-Glazed Carrots"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Braised Balsamic Short Ribs with Thyme', sides=['Creamy Polenta (using gluten-free cornmeal)', 'Honey-Glazed Carrots']))))], created=1730601784, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=41, prompt_tokens=1004, total_tokens=1045, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:04,316 - Foodee.Orchestrator - INFO - Completed meal generation for user admin
2024-11-02 22:43:09,394 - Foodee.Orchestrator - INFO - Found 342 documents for user admin in results collection
2024-11-02 22:43:09,400 - Foodee.Orchestrator - INFO - Retrieved 3 session IDs from results collection
2024-11-02 22:43:09,423 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('670124bf741b9f109f8aebab'), 'username': 'admin', 'session_id': '1fa9ad9f-a3c2-4111-ac1f-41485034925f', 'content': {'breakfast': {'meal': 'Mediterranean Omelette', 'sides': ['Greek yogurt with honey and fresh berries', 'Gluten-free toast with olive tapenade']}, 'lunch': {'meal': 'Lemon Herb Grilled Chicken Salad', 'sides': ['Quinoa with cherry tomatoes and cucumber', 'Homemade tzatziki sauce']}, 'dinner': {'meal': 'Herb-Crusted Sea Bass with Lemon Butter Sauce', 'sides': ['Truffle-infused mashed potatoes', 'Steamed asparagus with lemon zest']}}, 'datetimeimported': datetime.datetime(2024, 10, 5, 7, 36, 31, 724000)}
2024-11-02 22:43:09,424 - Foodee.Orchestrator - INFO - Generating grocery lists for user admin
2024-11-02 22:43:11,880 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:11,889 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of short ribs (about 1.5 kg)']}, {'category': 'Produce', 'items': ['1 bunch of fresh thyme', '1 bag of carrots (about 1 lb)']}, {'category': 'Dairy', 'items': ['1 pint of heavy cream']}, {'category': 'Pantry Items', 'items': ['1 bottle of balsamic vinegar', '1 package of gluten-free cornmeal', '1 jar of honey']}, {'category': 'Spices', 'items': ['1 small jar of dried thyme']}]}
2024-11-02 22:43:11,956 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APKs3MYsgrFTS6y8b0yUVVUPmAuYl', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of short ribs (about 1.5 kg)"]},{"category":"Produce","items":["1 bunch of fresh thyme","1 bag of carrots (about 1 lb)"]},{"category":"Dairy","items":["1 pint of heavy cream"]},{"category":"Pantry Items","items":["1 bottle of balsamic vinegar","1 package of gluten-free cornmeal","1 jar of honey"]},{"category":"Spices","items":["1 small jar of dried thyme"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of short ribs (about 1.5 kg)']), ShoppingListItem(category='Produce', items=['1 bunch of fresh thyme', '1 bag of carrots (about 1 lb)']), ShoppingListItem(category='Dairy', items=['1 pint of heavy cream']), ShoppingListItem(category='Pantry Items', items=['1 bottle of balsamic vinegar', '1 package of gluten-free cornmeal', '1 jar of honey']), ShoppingListItem(category='Spices', items=['1 small jar of dried thyme'])])))], created=1730601791, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=112, prompt_tokens=566, total_tokens=678, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:12,504 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 22:43:15,066 - Foodee.Orchestrator - INFO - Generated grocery list for session 2ad00822-cd64-4630-8be4-6fd2ca6f7a48
2024-11-02 22:43:16,196 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:16,202 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Meat/Protein', 'items': ['1 pack of pork tenderloin']}, {'category': 'Produce', 'items': ['1 bulb of garlic', '1 bunch of fresh herbs (such as thyme or rosemary)', '1 cucumber', '1 bunch of fresh dill', '1 head of broccoli', '1 lemon']}, {'category': 'Grains', 'items': ['1 box of quinoa']}]}
2024-11-02 22:43:16,207 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APKs7rs2CjmKGkJTKkG9O4eymzTNq', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Meat/Protein","items":["1 pack of pork tenderloin"]},{"category":"Produce","items":["1 bulb of garlic","1 bunch of fresh herbs (such as thyme or rosemary)","1 cucumber","1 bunch of fresh dill","1 head of broccoli","1 lemon"]},{"category":"Grains","items":["1 box of quinoa"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Meat/Protein', items=['1 pack of pork tenderloin']), ShoppingListItem(category='Produce', items=['1 bulb of garlic', '1 bunch of fresh herbs (such as thyme or rosemary)', '1 cucumber', '1 bunch of fresh dill', '1 head of broccoli', '1 lemon']), ShoppingListItem(category='Grains', items=['1 box of quinoa'])])))], created=1730601795, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=78, prompt_tokens=563, total_tokens=641, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:16,216 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 22:43:17,332 - Foodee.Orchestrator - INFO - Generated grocery list for session bbdcb27a-8857-4a89-8514-9e28ff4c8022
2024-11-02 22:43:18,526 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:43:18,532 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bunch of asparagus', '1 lemon', '1 bunch of basil', '1 bulb of garlic']}, {'category': 'Meat/Protein', 'items': ['1 pack of scallops (about 500g)']}, {'category': 'Dairy', 'items': ['1 pack of unsalted butter (about 250g)', '1 carton of cream (about 250ml)']}, {'category': 'Pantry Items', 'items': ['1 bag of potatoes (about 2kg)']}]}
2024-11-02 22:43:18,536 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-APKsAy4Pc9ADmKdIvA65HVTVUwbmb', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bunch of asparagus","1 lemon","1 bunch of basil","1 bulb of garlic"]},{"category":"Meat/Protein","items":["1 pack of scallops (about 500g)"]},{"category":"Dairy","items":["1 pack of unsalted butter (about 250g)","1 carton of cream (about 250ml)"]},{"category":"Pantry Items","items":["1 bag of potatoes (about 2kg)"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bunch of asparagus', '1 lemon', '1 bunch of basil', '1 bulb of garlic']), ShoppingListItem(category='Meat/Protein', items=['1 pack of scallops (about 500g)']), ShoppingListItem(category='Dairy', items=['1 pack of unsalted butter (about 250g)', '1 carton of cream (about 250ml)']), ShoppingListItem(category='Pantry Items', items=['1 bag of potatoes (about 2kg)'])])))], created=1730601798, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=105, prompt_tokens=564, total_tokens=669, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0}))
2024-11-02 22:43:18,545 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-02 22:43:19,867 - Foodee.Orchestrator - INFO - Generated grocery list for session 273d95bc-5b0a-4282-a4a2-cb14d2642960
2024-11-02 22:43:24,871 - Foodee.Orchestrator - INFO - Starting price lookup for user admin
2024-11-02 22:43:24,938 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-02 22:43:24,964 - perplexity_find_prices - INFO - Processing item 1/8: 1 pack of short ribs (about 1.5 kg)
2024-11-02 22:43:31,430 - perplexity_find_prices - INFO - Processing item 2/8: 1 bunch of fresh thyme
2024-11-02 22:43:34,194 - perplexity_find_prices - INFO - Processing item 3/8: 1 bag of carrots (about 1 lb)
2024-11-02 22:43:36,973 - perplexity_find_prices - INFO - Processing item 4/8: 1 pint of heavy cream
2024-11-02 22:43:43,007 - perplexity_find_prices - INFO - Processing item 5/8: 1 bottle of balsamic vinegar
2024-11-02 22:43:48,837 - perplexity_find_prices - INFO - Processing item 6/8: 1 package of gluten-free cornmeal
2024-11-02 22:43:55,133 - perplexity_find_prices - INFO - Processing item 7/8: 1 jar of honey
2024-11-02 22:43:59,666 - perplexity_find_prices - INFO - Processing item 8/8: 1 small jar of dried thyme
2024-11-02 22:44:07,268 - perplexity_find_prices - INFO - Generated shopping list with prices for user: admin
2024-11-02 22:44:07,269 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 2ad00822-cd64-4630-8be4-6fd2ca6f7a48
2024-11-02 22:44:07,270 - Foodee.Orchestrator - INFO - Total price for shopping list: $50.79
2024-11-02 22:44:07,274 - perplexity_find_prices - INFO - Processing item 1/8: 1 pack of pork tenderloin
2024-11-02 22:44:15,085 - perplexity_find_prices - INFO - Processing item 2/8: 1 bulb of garlic
2024-11-02 22:44:20,786 - perplexity_find_prices - INFO - Processing item 3/8: 1 bunch of fresh herbs (such as thyme or rosemary)
2024-11-02 22:44:25,484 - perplexity_find_prices - INFO - Processing item 4/8: 1 cucumber
2024-11-02 22:44:32,870 - perplexity_find_prices - INFO - Processing item 5/8: 1 bunch of fresh dill
2024-11-02 22:44:36,195 - perplexity_find_prices - INFO - Processing item 6/8: 1 head of broccoli
2024-11-02 22:44:39,408 - perplexity_find_prices - INFO - Processing item 7/8: 1 lemon
2024-11-02 22:44:44,465 - perplexity_find_prices - INFO - Processing item 8/8: 1 box of quinoa
2024-11-02 22:44:49,080 - perplexity_find_prices - INFO - Generated shopping list with prices for user: admin
2024-11-02 22:44:49,081 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session bbdcb27a-8857-4a89-8514-9e28ff4c8022
2024-11-02 22:44:49,081 - Foodee.Orchestrator - INFO - Total price for shopping list: $20.77
2024-11-02 22:44:49,085 - perplexity_find_prices - INFO - Processing item 1/8: 1 bunch of asparagus
2024-11-02 22:44:54,271 - perplexity_find_prices - INFO - Processing item 2/8: 1 lemon
2024-11-02 22:44:59,751 - perplexity_find_prices - INFO - Processing item 3/8: 1 bunch of basil
2024-11-02 22:45:03,083 - perplexity_find_prices - INFO - Processing item 4/8: 1 bulb of garlic
2024-11-02 22:45:12,088 - perplexity_find_prices - INFO - Processing item 5/8: 1 pack of scallops (about 500g)
2024-11-02 22:45:33,790 - perplexity_find_prices - INFO - Processing item 6/8: 1 pack of unsalted butter (about 250g)
2024-11-02 22:45:39,824 - perplexity_find_prices - INFO - Processing item 7/8: 1 carton of cream (about 250ml)
2024-11-02 22:45:46,202 - perplexity_find_prices - INFO - Processing item 8/8: 1 bag of potatoes (about 2kg)
2024-11-02 22:45:54,794 - perplexity_find_prices - INFO - Generated shopping list with prices for user: admin
2024-11-02 22:45:54,795 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 273d95bc-5b0a-4282-a4a2-cb14d2642960
2024-11-02 22:45:54,795 - Foodee.Orchestrator - INFO - Total price for shopping list: $26.13
2024-11-02 22:45:59,805 - Foodee.Orchestrator - INFO - Starting message formatting for user admin with sessions ['2ad00822-cd64-4630-8be4-6fd2ca6f7a48', 'bbdcb27a-8857-4a89-8514-9e28ff4c8022', '273d95bc-5b0a-4282-a4a2-cb14d2642960']
2024-11-02 22:46:08,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:46:08,304 - Foodee.Orchestrator - INFO - Completed message formatting for user admin
2024-11-02 22:46:08,305 - Foodee.Orchestrator - INFO - Displaying formatted messages for user admin with sessions ['2ad00822-cd64-4630-8be4-6fd2ca6f7a48', 'bbdcb27a-8857-4a89-8514-9e28ff4c8022', '273d95bc-5b0a-4282-a4a2-cb14d2642960']
2024-11-02 22:46:08,611 - outbound_messages - INFO - Stored meal data for nutrition processing for user: admin
2024-11-02 22:46:08,612 - Foodee.Orchestrator - INFO - Completed displaying messages for user admin
2024-11-02 22:46:08,613 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user admin
2024-11-02 22:46:08,666 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 2ad00822-cd64-4630-8be4-6fd2ca6f7a48
2024-11-02 22:46:08,806 - recipe_nutrition - INFO - Successfully fetched meal plans for user: admin
2024-11-02 22:46:08,826 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Braised Balsamic Short Ribs with Thyme', 'sides': ['Creamy Polenta (using gluten-free cornmeal)', 'Honey-Glazed Carrots']}, {'date': '2024-11-02', 'main_dish': 'Roasted Garlic and Herb Pork Tenderloin', 'sides': ['Quinoa Salad with Cucumber and Dill', 'Steamed Broccoli with Lemon Zest']}, {'date': '2024-11-02', 'main_dish': 'Pan-Seared Scallops with Lemon Basil Butter', 'sides': ['Roasted Garlic Mashed Potatoes', 'Steamed Asparagus with Lemon Zest']}]
2024-11-02 22:46:20,817 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:46:20,829 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: admin
2024-11-02 22:46:20,847 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 22:46:20,847 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 2ad00822-cd64-4630-8be4-6fd2ca6f7a48
2024-11-02 22:46:20,847 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: bbdcb27a-8857-4a89-8514-9e28ff4c8022
2024-11-02 22:46:20,854 - recipe_nutrition - INFO - Successfully fetched meal plans for user: admin
2024-11-02 22:46:20,854 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Braised Balsamic Short Ribs with Thyme', 'sides': ['Creamy Polenta (using gluten-free cornmeal)', 'Honey-Glazed Carrots']}, {'date': '2024-11-02', 'main_dish': 'Roasted Garlic and Herb Pork Tenderloin', 'sides': ['Quinoa Salad with Cucumber and Dill', 'Steamed Broccoli with Lemon Zest']}, {'date': '2024-11-02', 'main_dish': 'Pan-Seared Scallops with Lemon Basil Butter', 'sides': ['Roasted Garlic Mashed Potatoes', 'Steamed Asparagus with Lemon Zest']}]
2024-11-02 22:46:33,190 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:46:33,197 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: admin
2024-11-02 22:46:33,201 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 22:46:33,202 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session bbdcb27a-8857-4a89-8514-9e28ff4c8022
2024-11-02 22:46:33,202 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 273d95bc-5b0a-4282-a4a2-cb14d2642960
2024-11-02 22:46:33,209 - recipe_nutrition - INFO - Successfully fetched meal plans for user: admin
2024-11-02 22:46:33,210 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-02', 'main_dish': 'Braised Balsamic Short Ribs with Thyme', 'sides': ['Creamy Polenta (using gluten-free cornmeal)', 'Honey-Glazed Carrots']}, {'date': '2024-11-02', 'main_dish': 'Roasted Garlic and Herb Pork Tenderloin', 'sides': ['Quinoa Salad with Cucumber and Dill', 'Steamed Broccoli with Lemon Zest']}, {'date': '2024-11-02', 'main_dish': 'Pan-Seared Scallops with Lemon Basil Butter', 'sides': ['Roasted Garlic Mashed Potatoes', 'Steamed Asparagus with Lemon Zest']}]
2024-11-02 22:46:45,102 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-02 22:46:45,112 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: admin
2024-11-02 22:46:45,135 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-02 22:46:45,136 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 273d95bc-5b0a-4282-a4a2-cb14d2642960
2024-11-02 22:46:45,136 - Foodee.Orchestrator - INFO - Completed recipe and nutrition generation for user admin
2024-11-02 22:46:50,145 - Foodee.Orchestrator - INFO - Reading nutrition information for user admin
2024-11-02 22:46:50,397 - Foodee.Orchestrator - INFO - Completed full Foodee process for user admin
2024-11-05 06:39:54,430 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-05 06:39:54,460 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5768
2024-11-05 06:39:54,462 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-05 06:39:54,462 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-05 06:40:00,005 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:40:00,060 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Paneer Bhurji with Whole Grain Roti and Spiced Quinoa Salad', sides=['Whole Grain Roti', 'Spiced Quinoa Salad'])
2024-11-05 06:40:00,064 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCCdXbAB5TSzXzWMHyiau83T6FoV', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Paneer Bhurji with Whole Grain Roti and Spiced Quinoa Salad","sides":["Whole Grain Roti","Spiced Quinoa Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Paneer Bhurji with Whole Grain Roti and Spiced Quinoa Salad', sides=['Whole Grain Roti', 'Spiced Quinoa Salad']))))], created=1730806799, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=38, prompt_tokens=967, total_tokens=1005, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:40:01,729 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:40:01,733 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Chickpea and Paneer Stuffed Bell Peppers', sides=['Cucumber and Mint Raita', 'Warm Millet and Mixed Vegetable Salad'])
2024-11-05 06:40:01,739 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCCftFjpVV1jW90ePVGeMNK6XBfK', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Chickpea and Paneer Stuffed Bell Peppers","sides":["Cucumber and Mint Raita","Warm Millet and Mixed Vegetable Salad"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Chickpea and Paneer Stuffed Bell Peppers', sides=['Cucumber and Mint Raita', 'Warm Millet and Mixed Vegetable Salad']))))], created=1730806801, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=36, prompt_tokens=973, total_tokens=1009, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:40:01,749 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-05 06:40:06,767 - Foodee.Orchestrator - INFO - Found 57 documents for user TrevorClient1 in results collection
2024-11-05 06:40:06,778 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-05 06:40:06,804 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-05 06:40:06,805 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-05 06:40:06,857 - Foodee.Orchestrator - ERROR - Error in grocery list generation: name 'OPENAI_API_KEY' is not defined
2024-11-05 06:40:06,858 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'OPENAI_API_KEY' is not defined
2024-11-05 06:40:06,858 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'OPENAI_API_KEY' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 597, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 446, in orchestrate_full_process
    await self.run_grocery_list_generation(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 191, in run_grocery_list_generation
    await shopping_service.run_shopping_list_generation()
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 252, in run_shopping_list_generation
    openai_provider = OpenAIProvider(api_key=OPENAI_API_KEY)
                                             ^^^^^^^^^^^^^^
NameError: name 'OPENAI_API_KEY' is not defined
2024-11-05 06:40:06,879 - Foodee.Orchestrator - ERROR - Error in main process: name 'OPENAI_API_KEY' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 622, in <module>
    loop.run_until_complete(main())
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 597, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 446, in orchestrate_full_process
    await self.run_grocery_list_generation(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 191, in run_grocery_list_generation
    await shopping_service.run_shopping_list_generation()
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 252, in run_shopping_list_generation
    openai_provider = OpenAIProvider(api_key=OPENAI_API_KEY)
                                             ^^^^^^^^^^^^^^
NameError: name 'OPENAI_API_KEY' is not defined
2024-11-05 06:42:16,956 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-05 06:42:17,285 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5770
2024-11-05 06:42:17,288 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-05 06:42:17,288 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-05 06:42:21,093 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:42:21,141 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Sprouted Moong Dal and Paneer Stir-fry', sides=['Brown Basmati Rice Pilaf with Cumin and Peas', 'Cucumber-Mint Raita'])
2024-11-05 06:42:21,144 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCEuRzc21L0YTm97J8wVa50YZKEP', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Sprouted Moong Dal and Paneer Stir-fry","sides":["Brown Basmati Rice Pilaf with Cumin and Peas","Cucumber-Mint Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Sprouted Moong Dal and Paneer Stir-fry', sides=['Brown Basmati Rice Pilaf with Cumin and Peas', 'Cucumber-Mint Raita']))))], created=1730806940, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=43, prompt_tokens=972, total_tokens=1015, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:42:22,832 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:42:22,836 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Grilled Tandoori Paneer Steaks', sides=['Spiced Sweet Potato Mash', 'Cucumber Mint Raita'])
2024-11-05 06:42:22,840 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCEwG6EesQH5EM42hoEmKNBqEyGq', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Grilled Tandoori Paneer Steaks","sides":["Spiced Sweet Potato Mash","Cucumber Mint Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Grilled Tandoori Paneer Steaks', sides=['Spiced Sweet Potato Mash', 'Cucumber Mint Raita']))))], created=1730806942, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=32, prompt_tokens=967, total_tokens=999, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:42:22,848 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-05 06:42:27,870 - Foodee.Orchestrator - INFO - Found 59 documents for user TrevorClient1 in results collection
2024-11-05 06:42:27,878 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-05 06:42:27,884 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-05 06:42:27,884 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-05 06:42:31,639 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:42:31,656 - Foodee.Orchestrator - ERROR - Error in grocery list generation: name 'log_collection' is not defined
2024-11-05 06:42:31,657 - Foodee.Orchestrator - ERROR - Error in orchestration process: name 'log_collection' is not defined
2024-11-05 06:42:31,657 - Foodee.Orchestrator - ERROR - Fatal error in main: name 'log_collection' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 63, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 203, in generate_shopping_list_from_provider
    logger.info(f"Full AI parsed response: {shopping_list_response.dict()}")
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1539, in info
    self._log(INFO, msg, args, **kwargs)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1684, in _log
    self.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1700, in handle
    self.callHandlers(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1762, in callHandlers
    hdlr.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1028, in handle
    self.emit(record)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 26, in emit
    log_collection.insert_one(log_document)
    ^^^^^^^^^^^^^^
NameError: name 'log_collection' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 597, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 446, in orchestrate_full_process
    await self.run_grocery_list_generation(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 191, in run_grocery_list_generation
    await shopping_service.run_shopping_list_generation()
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 255, in run_shopping_list_generation
    await self.generate_shopping_list_from_provider(openai_provider, prompt)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 65, in wrapper
    logger.error(f"Error in {func.__name__}: {e}")
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1568, in error
    self._log(ERROR, msg, args, **kwargs)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1684, in _log
    self.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1700, in handle
    self.callHandlers(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1762, in callHandlers
    hdlr.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1028, in handle
    self.emit(record)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 26, in emit
    log_collection.insert_one(log_document)
    ^^^^^^^^^^^^^^
NameError: name 'log_collection' is not defined
2024-11-05 06:42:31,734 - Foodee.Orchestrator - ERROR - Error in main process: name 'log_collection' is not defined
Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 63, in wrapper
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 203, in generate_shopping_list_from_provider
    logger.info(f"Full AI parsed response: {shopping_list_response.dict()}")
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1539, in info
    self._log(INFO, msg, args, **kwargs)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1684, in _log
    self.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1700, in handle
    self.callHandlers(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1762, in callHandlers
    hdlr.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1028, in handle
    self.emit(record)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 26, in emit
    log_collection.insert_one(log_document)
    ^^^^^^^^^^^^^^
NameError: name 'log_collection' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 622, in <module>
    loop.run_until_complete(main())
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 597, in main
    await orchestrator.orchestrate_full_process(username, num_iterations)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 446, in orchestrate_full_process
    await self.run_grocery_list_generation(username, session_ids)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\orch\orch_sng_ml_wc.py", line 191, in run_grocery_list_generation
    await shopping_service.run_shopping_list_generation()
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 255, in run_shopping_list_generation
    await self.generate_shopping_list_from_provider(openai_provider, prompt)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 65, in wrapper
    logger.error(f"Error in {func.__name__}: {e}")
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1568, in error
    self._log(ERROR, msg, args, **kwargs)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1684, in _log
    self.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1700, in handle
    self.callHandlers(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1762, in callHandlers
    hdlr.handle(record)
  File "C:\Users\ernes\AppData\Local\Programs\Python\Python312\Lib\logging\__init__.py", line 1028, in handle
    self.emit(record)
  File "C:\Users\ernes\PycharmProjects\FoodE_2024\FoodE\recipe_search\generate_shopping_list.py", line 26, in emit
    log_collection.insert_one(log_document)
    ^^^^^^^^^^^^^^
NameError: name 'log_collection' is not defined
2024-11-05 06:45:38,837 - Foodee.Orchestrator - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-05 06:45:38,852 - Foodee.Orchestrator - INFO - Connected to results collection. Total documents: 5772
2024-11-05 06:45:38,854 - Foodee.Orchestrator - INFO - Starting full Foodee process for user TrevorClient1
2024-11-05 06:45:38,854 - Foodee.Orchestrator - INFO - Starting meal generation for user TrevorClient1 with 2 iterations
2024-11-05 06:45:43,134 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:45:43,181 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Punjabi Chole with Mixed Bean and Paneer Patties', sides=['Brown Basmati Rice Pilaf with Aromatic Spices', 'Cucumber and Mint Raita'])
2024-11-05 06:45:43,185 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCIAYsi0QsbYw6F7bm5rmeyorh94', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Punjabi Chole with Mixed Bean and Paneer Patties","sides":["Brown Basmati Rice Pilaf with Aromatic Spices","Cucumber and Mint Raita"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Punjabi Chole with Mixed Bean and Paneer Patties', sides=['Brown Basmati Rice Pilaf with Aromatic Spices', 'Cucumber and Mint Raita']))))], created=1730807142, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=43, prompt_tokens=966, total_tokens=1009, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:45:45,079 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:45:45,082 - openai_meal_gen_single_meal - INFO - Full AI parsed response: meal_type=MealSuggestion(meal='Palak Paneer and Lentil Stew', sides=['Brown Rice Pilaf with Toasted Cumin Seeds', 'Cucumber Raita with Fresh Mint'])
2024-11-05 06:45:45,087 - openai_meal_gen_single_meal - INFO - Full AI raw response: ParsedChatCompletion[MealResponseSchema](id='chatcmpl-AQCICCX6eShlo5ce8HL0YPVAPlNXu', choices=[ParsedChoice[MealResponseSchema](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[MealResponseSchema](content='{"meal_type":{"meal":"Palak Paneer and Lentil Stew","sides":["Brown Rice Pilaf with Toasted Cumin Seeds","Cucumber Raita with Fresh Mint"]}}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=MealResponseSchema(meal_type=MealSuggestion(meal='Palak Paneer and Lentil Stew', sides=['Brown Rice Pilaf with Toasted Cumin Seeds', 'Cucumber Raita with Fresh Mint']))))], created=1730807144, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=39, prompt_tokens=969, total_tokens=1008, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:45:45,098 - Foodee.Orchestrator - INFO - Completed meal generation for user TrevorClient1
2024-11-05 06:45:50,119 - Foodee.Orchestrator - INFO - Found 61 documents for user TrevorClient1 in results collection
2024-11-05 06:45:50,125 - Foodee.Orchestrator - INFO - Retrieved 2 session IDs from results collection
2024-11-05 06:45:50,133 - Foodee.Orchestrator - INFO - Sample document structure: {'_id': ObjectId('67219b57558920e3d6986461'), 'username': 'TrevorClient1', 'session_id': '0754d420-d203-486c-b053-7acc95ad6901', 'content': {'meal_type': {'meal': 'Palak Paneer (Spinach & Cheese)', 'sides': ['Brown Lentil Dal (high-protein legume side)', 'Quinoa Salad with Cucumber and Tomato', 'Whole Wheat Chapati']}}, 'datetimeimported': datetime.datetime(2024, 10, 29, 22, 35, 3, 300000)}
2024-11-05 06:45:50,134 - Foodee.Orchestrator - INFO - Generating grocery lists for user TrevorClient1
2024-11-05 06:45:56,133 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:45:56,144 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 bag of spinach (about 200g)', '1 cucumber', '1 bunch of fresh mint']}, {'category': 'Meat/Protein', 'items': ['1 block of paneer cheese (about 200g)']}, {'category': 'Dairy', 'items': ['1 container of plain yogurt (500g)']}, {'category': 'Pantry Items', 'items': ['1 bag of brown rice (1kg)', '1 pack of lentils (500g)', '1 bottle of cumin seeds']}]}
2024-11-05 06:45:56,156 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AQCIJO18TSneLbXKOOg3uJAvP3dS4', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 bag of spinach (about 200g)","1 cucumber","1 bunch of fresh mint"]},{"category":"Meat/Protein","items":["1 block of paneer cheese (about 200g)"]},{"category":"Dairy","items":["1 container of plain yogurt (500g)"]},{"category":"Pantry Items","items":["1 bag of brown rice (1kg)","1 pack of lentils (500g)","1 bottle of cumin seeds"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 bag of spinach (about 200g)', '1 cucumber', '1 bunch of fresh mint']), ShoppingListItem(category='Meat/Protein', items=['1 block of paneer cheese (about 200g)']), ShoppingListItem(category='Dairy', items=['1 container of plain yogurt (500g)']), ShoppingListItem(category='Pantry Items', items=['1 bag of brown rice (1kg)', '1 pack of lentils (500g)', '1 bottle of cumin seeds'])])))], created=1730807151, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=109, prompt_tokens=565, total_tokens=674, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:45:56,191 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-05 06:45:56,193 - Foodee.Orchestrator - INFO - Generated grocery list for session 3178a36d-8a97-4d42-927a-1616fdc336b6
2024-11-05 06:46:01,661 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:46:01,664 - generate_shopping_list - INFO - Full AI parsed response: {'shopping_list': [{'category': 'Produce', 'items': ['1 cucumber', '1 bunch of mint leaves', '1 lemon']}, {'category': 'Meat/Protein', 'items': ['1 pack of paneer (about 200g)']}, {'category': 'Grains/Bread', 'items': ['1 bag of brown basmati rice (about 1kg)']}, {'category': 'Canned/Bottled Goods', 'items': ['1 can of chickpeas (about 400g)', '1 can of mixed beans (about 400g)']}, {'category': 'Dairy', 'items': ['1 container of plain yogurt (about 500g)']}, {'category': 'Spices/Herbs', 'items': ['1 pack of cumin seeds', '1 pack of coriander seeds', '1 pack of garam masala', '1 pack of turmeric powder']}]}
2024-11-05 06:46:01,668 - generate_shopping_list - INFO - Full AI raw response: ParsedChatCompletion[ShoppingListResponse](id='chatcmpl-AQCIOyV8wpk8vIbPPVc4dS3JfBiFn', choices=[ParsedChoice[ShoppingListResponse](finish_reason='stop', index=0, logprobs=None, message=ParsedChatCompletionMessage[ShoppingListResponse](content='{"shopping_list":[{"category":"Produce","items":["1 cucumber","1 bunch of mint leaves","1 lemon"]},{"category":"Meat/Protein","items":["1 pack of paneer (about 200g)"]},{"category":"Grains/Bread","items":["1 bag of brown basmati rice (about 1kg)"]},{"category":"Canned/Bottled Goods","items":["1 can of chickpeas (about 400g)","1 can of mixed beans (about 400g)"]},{"category":"Dairy","items":["1 container of plain yogurt (about 500g)"]},{"category":"Spices/Herbs","items":["1 pack of cumin seeds","1 pack of coriander seeds","1 pack of garam masala","1 pack of turmeric powder"]}]}', refusal=None, role='assistant', function_call=None, tool_calls=[], parsed=ShoppingListResponse(shopping_list=[ShoppingListItem(category='Produce', items=['1 cucumber', '1 bunch of mint leaves', '1 lemon']), ShoppingListItem(category='Meat/Protein', items=['1 pack of paneer (about 200g)']), ShoppingListItem(category='Grains/Bread', items=['1 bag of brown basmati rice (about 1kg)']), ShoppingListItem(category='Canned/Bottled Goods', items=['1 can of chickpeas (about 400g)', '1 can of mixed beans (about 400g)']), ShoppingListItem(category='Dairy', items=['1 container of plain yogurt (about 500g)']), ShoppingListItem(category='Spices/Herbs', items=['1 pack of cumin seeds', '1 pack of coriander seeds', '1 pack of garam masala', '1 pack of turmeric powder'])])))], created=1730807156, model='gpt-4o-2024-08-06', object='chat.completion', service_tier=None, system_fingerprint='fp_159d8341cc', usage=CompletionUsage(completion_tokens=164, prompt_tokens=569, total_tokens=733, prompt_tokens_details={'cached_tokens': 0}, completion_tokens_details={'reasoning_tokens': 0, 'accepted_prediction_tokens': 0, 'rejected_prediction_tokens': 0}))
2024-11-05 06:46:01,680 - generate_shopping_list - INFO - Shopping list generation complete.
2024-11-05 06:46:01,683 - Foodee.Orchestrator - INFO - Generated grocery list for session 5a682e8a-80c3-4576-b421-6269273611e9
2024-11-05 06:46:06,684 - Foodee.Orchestrator - INFO - Starting price lookup for user TrevorClient1
2024-11-05 06:46:06,754 - perplexity_find_prices - INFO - Successfully connected to MongoDB at mongodb://192.168.88.27:27018/foode
2024-11-05 06:46:06,780 - perplexity_find_prices - INFO - Processing item 1/8: 1 bag of spinach (about 200g)
2024-11-05 06:46:15,592 - perplexity_find_prices - INFO - Processing item 2/8: 1 cucumber
2024-11-05 06:46:19,276 - perplexity_find_prices - INFO - Processing item 3/8: 1 bunch of fresh mint
2024-11-05 06:46:24,599 - perplexity_find_prices - INFO - Processing item 4/8: 1 block of paneer cheese (about 200g)
2024-11-05 06:46:30,201 - perplexity_find_prices - INFO - Processing item 5/8: 1 container of plain yogurt (500g)
2024-11-05 06:46:37,095 - perplexity_find_prices - INFO - Processing item 6/8: 1 bag of brown rice (1kg)
2024-11-05 06:46:42,417 - perplexity_find_prices - INFO - Processing item 7/8: 1 pack of lentils (500g)
2024-11-05 06:47:00,514 - perplexity_find_prices - INFO - Processing item 8/8: 1 bottle of cumin seeds
2024-11-05 06:47:09,356 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-05 06:47:09,357 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 3178a36d-8a97-4d42-927a-1616fdc336b6
2024-11-05 06:47:09,357 - Foodee.Orchestrator - INFO - Total price for shopping list: $12.81
2024-11-05 06:47:09,361 - perplexity_find_prices - INFO - Processing item 1/12: 1 cucumber
2024-11-05 06:47:13,445 - perplexity_find_prices - INFO - Processing item 2/12: 1 bunch of mint leaves
2024-11-05 06:47:16,703 - perplexity_find_prices - INFO - Processing item 3/12: 1 lemon
2024-11-05 06:47:21,750 - perplexity_find_prices - INFO - Processing item 4/12: 1 pack of paneer (about 200g)
2024-11-05 06:47:30,334 - perplexity_find_prices - INFO - Processing item 5/12: 1 bag of brown basmati rice (about 1kg)
2024-11-05 06:47:36,899 - perplexity_find_prices - INFO - Processing item 6/12: 1 can of chickpeas (about 400g)
2024-11-05 06:47:43,901 - perplexity_find_prices - INFO - Processing item 7/12: 1 can of mixed beans (about 400g)
2024-11-05 06:47:52,504 - perplexity_find_prices - INFO - Processing item 8/12: 1 container of plain yogurt (about 500g)
2024-11-05 06:47:58,772 - perplexity_find_prices - INFO - Processing item 9/12: 1 pack of cumin seeds
2024-11-05 06:48:07,760 - perplexity_find_prices - INFO - Processing item 10/12: 1 pack of coriander seeds
2024-11-05 06:48:18,820 - perplexity_find_prices - INFO - Processing item 11/12: 1 pack of garam masala
2024-11-05 06:48:31,005 - perplexity_find_prices - INFO - Processing item 12/12: 1 pack of turmeric powder
2024-11-05 06:48:42,791 - perplexity_find_prices - INFO - Generated shopping list with prices for user: TrevorClient1
2024-11-05 06:48:42,792 - Foodee.Orchestrator - INFO - Generated prices for shopping list with session 5a682e8a-80c3-4576-b421-6269273611e9
2024-11-05 06:48:42,792 - Foodee.Orchestrator - INFO - Total price for shopping list: $30.74
2024-11-05 06:48:47,796 - Foodee.Orchestrator - INFO - Starting message formatting for user TrevorClient1 with sessions ['3178a36d-8a97-4d42-927a-1616fdc336b6', '5a682e8a-80c3-4576-b421-6269273611e9']
2024-11-05 06:48:52,714 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:48:52,720 - Foodee.Orchestrator - INFO - Completed message formatting for user TrevorClient1
2024-11-05 06:48:52,720 - Foodee.Orchestrator - INFO - Displaying formatted messages for user TrevorClient1 with sessions ['3178a36d-8a97-4d42-927a-1616fdc336b6', '5a682e8a-80c3-4576-b421-6269273611e9']
2024-11-05 06:48:52,793 - outbound_messages - INFO - Stored meal data for nutrition processing for user: TrevorClient1
2024-11-05 06:48:52,793 - Foodee.Orchestrator - INFO - Completed displaying messages for user TrevorClient1
2024-11-05 06:48:52,794 - Foodee.Orchestrator - INFO - Starting recipe and nutrition generation for user TrevorClient1
2024-11-05 06:48:52,828 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 3178a36d-8a97-4d42-927a-1616fdc336b6
2024-11-05 06:48:52,834 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-05 06:48:52,836 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-05', 'main_dish': 'Palak Paneer and Lentil Stew', 'sides': ['Brown Rice Pilaf with Toasted Cumin Seeds', 'Cucumber Raita with Fresh Mint']}, {'date': '2024-11-05', 'main_dish': 'Punjabi Chole with Mixed Bean and Paneer Patties', 'sides': ['Brown Basmati Rice Pilaf with Aromatic Spices', 'Cucumber and Mint Raita']}]
2024-11-05 06:49:16,881 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:49:16,894 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-05 06:49:16,898 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-05 06:49:16,898 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 3178a36d-8a97-4d42-927a-1616fdc336b6
2024-11-05 06:49:16,899 - Foodee.Orchestrator - INFO - Processing nutrition for session ID: 5a682e8a-80c3-4576-b421-6269273611e9
2024-11-05 06:49:16,927 - recipe_nutrition - INFO - Successfully fetched meal plans for user: TrevorClient1
2024-11-05 06:49:16,928 - recipe_nutrition - INFO - Built prompt for meals: [{'date': '2024-11-05', 'main_dish': 'Palak Paneer and Lentil Stew', 'sides': ['Brown Rice Pilaf with Toasted Cumin Seeds', 'Cucumber Raita with Fresh Mint']}, {'date': '2024-11-05', 'main_dish': 'Punjabi Chole with Mixed Bean and Paneer Patties', 'sides': ['Brown Basmati Rice Pilaf with Aromatic Spices', 'Cucumber and Mint Raita']}]
2024-11-05 06:49:37,976 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-05 06:49:37,980 - recipe_nutrition - INFO - Recipe and nutrition info generated for user: TrevorClient1
2024-11-05 06:49:37,982 - recipe_nutrition - INFO - Recipe and nutrition information generation complete
2024-11-05 06:49:37,982 - Foodee.Orchestrator - INFO - Generated recipe and nutrition info for session 5a682e8a-80c3-4576-b421-6269273611e9
2024-11-05 06:49:37,983 - Foodee.Orchestrator - INFO - Completed recipe and nutrition generation for user TrevorClient1
2024-11-05 06:49:42,987 - Foodee.Orchestrator - INFO - Reading nutrition information for user TrevorClient1
2024-11-05 06:49:43,128 - Foodee.Orchestrator - INFO - Completed full Foodee process for user TrevorClient1
